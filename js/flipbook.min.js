var FLIPBOOK=FLIPBOOK||{};!function init(jQuery,window,document,undefined){jQuery.fn.flipBook=function(options){return new FLIPBOOK.Main(options,this)},jQuery.fn.swipeBook=function(options){return options.viewMode="swipe",new FLIPBOOK.Main(options,this)},jQuery.fn.flipBook.options={name:"",pages:[],tableOfContent:[],tableOfContentCloseOnClick:!0,thumbsCloseOnClick:!0,deeplinkingEnabled:!1,deeplinkingPrefix:"",assets:{preloader:"/images/preloader.jpg",overlay:"/images/overlay.png",flipMp3:"/mp3/turnPage.mp3",spinner:"/images/spinner.gif"},pdfUrl:null,pdfBrowserViewerIfMobile:!1,pdfBrowserViewerIfIE:!1,pdfBrowserViewerFullscreen:!0,pdfBrowserViewerFullscreenTarget:"_blank",pdfPageScale:1,pdfOutline:!0,htmlLayer:!0,rightToLeft:!1,startPage:0,sound:!0,backgroundColor:"rgb(81, 85, 88)",backgroundImage:"",backgroundPattern:"",backgroundTransparent:!1,thumbSize:130,loadAllPages:!1,loadPagesF:2,loadPagesB:1,autoplayOnStart:!1,autoplayInterval:3e3,skin:"light",layout:"1",menuOverBook:!1,menuFloating:!1,menuBackground:"",menuShadow:"",menuMargin:0,menuPadding:0,menuTransparent:!1,menu2OverBook:!0,menu2Floating:!1,menu2Background:"",menu2Shadow:"",menu2Margin:0,menu2Padding:0,menu2Transparent:!0,skinColor:"",skinBackground:"",floatingBtnColor:"#FFF",floatingBtnBackground:"#00000044",btnSize:14,btnRadius:2,btnMargin:2,btnShadow:"",btnTextShadow:"",btnBorder:"",btnColor:"",btnColorHover:"",btnBackground:"none",btnBackgroundHover:"",sideBtnSize:30,sideBtnRadius:0,sideBtnMargin:0,sideBtnPaddingV:5,sideBtnPaddingH:0,sideBtnShadow:"",sideBtnTextShadow:"",sideBtnBorder:"",sideBtnColor:"#FFF",sideBtnBackground:"#00000033",btnOrder:["currentPage","btnFirst","btnPrev","btnNext","btnLast","btnZoomIn","btnZoomOut","btnRotateLeft","btnRotateRight","btnAutoplay","btnSearch","btnSelect","btnBookmark","btnToc","btnThumbs","btnShare","btnPrint","btnDownloadPages","btnDownloadPdf","btnSound","btnExpand","btnClose"],currentPage:{enabled:!0,title:"Current page",vAlign:"top",hAlign:"left",marginH:0,marginV:0,color:"",background:""},btnFirst:{enabled:!1,title:"First page",icon:"fa-angle-double-left",icon2:"first_page"},btnPrev:{enabled:!0,title:"Previous page",icon:"fa-angle-left",icon2:"chevron_left"},btnNext:{enabled:!0,title:"Next page",icon:"fa-angle-right",icon2:"chevron_right"},btnLast:{enabled:!1,title:"Last page",icon:"fa-angle-double-right",icon2:"last_page"},btnZoomIn:{enabled:!0,title:"Zoom in",icon:"fa-plus",icon2:"zoom_in"},btnZoomOut:{enabled:!0,title:"Zoom out",icon:"fa-minus",icon2:"zoom_out"},btnRotateLeft:{enabled:!1,title:"Rotate left",icon:"fas fa-undo"},btnRotateRight:{enabled:!1,title:"Rotate right",icon:"fas fa-redo"},btnAutoplay:{enabled:!0,title:"Autoplay",icon:"fa-play",icon2:"play_arrow",iconAlt:"fa-pause",iconAlt2:"pause"},btnSearch:{enabled:!1,title:"Search",icon:"fas fa-search",icon2:"search"},btnSelect:{enabled:!0,title:"Select tool",icon:"fas fa-i-cursor",icon2:"text_format"},btnBookmark:{enabled:!0,title:"Bookmark",icon:"fas fa-bookmark",icon2:"bookmark"},btnToc:{enabled:!0,title:"Table of Contents",icon:"fa-list-ol",icon2:"toc"},btnThumbs:{enabled:!0,title:"Pages",icon:"fa-th-large",icon2:"view_module"},btnShare:{enabled:!0,title:"Share",icon:"fa-link",icon2:"share",hideOnMobile:!0},btnPrint:{enabled:!0,title:"Print",icon:"fa-print",icon2:"print",hideOnMobile:!0},btnDownloadPages:{enabled:!0,title:"Download pages",icon:"fa-download",icon2:"file_download",url:"images/pages.zip",name:"allPages.zip"},btnDownloadPdf:{forceDownload:!1,enabled:!0,title:"Download PDF",icon:"fa-file",icon2:"picture_as_pdf",url:null,openInNewWindow:!0,name:"allPages.pdf"},btnSound:{enabled:!0,title:"Volume",icon:"fa-volume-up",iconAlt:"fa-volume-off",icon2:"volume_up",iconAlt2:"volume_mute",hideOnMobile:!0},btnExpand:{enabled:!0,title:"Toggle fullscreen",icon:"fa-expand",icon2:"fullscreen",iconAlt:"fa-compress",iconAlt2:"fullscreen_exit"},btnClose:{title:"Close",icon:"fa-times",icon2:"close",hAlign:"right",vAlign:"top"},btnShareIfMobile:!1,btnSoundIfMobile:!1,btnPrintIfMobile:!1,sideNavigationButtons:!0,hideMenu:!1,google_plus:{enabled:!0,url:null},twitter:{enabled:!0,url:null,description:null},facebook:{enabled:!0,load_sdk:!0,url:null,app_id:null,title:null,caption:null,description:null,image:null},pinterest:{enabled:!0,url:null,image:null,description:null},email:{enabled:!0,title:null,description:null,url:null},pdf:{annotationLayer:!1},pageTextureSize:2048,pageTextureSizeSmall:1024,pageTextureSizeTreshold:1024,viewMode:"webgl",singlePageMode:!1,singlePageModeIfMobile:!1,zoomMin:.95,zoomSize:null,zoomStep:2,zoomTime:0,wheelDisabledNotFullscreen:!1,arrowsDisabledNotFullscreen:!1,responsiveView:!0,responsiveViewTreshold:768,minPixelRatio:1,pageFlipDuration:1,contentOnStart:!1,thumbnailsOnStart:!1,sideMenuOverBook:!0,sideMenuOverMenu:!1,sideMenuOverMenu2:!0,lightBox:!1,lightBoxOpened:!1,lightBoxFullscreen:!1,lightboxCloseOnClick:!1,lightboxResetOnOpen:!0,lightboxBackground:null,lightboxStartPage:null,lightboxMarginV:"0",lightboxMarginH:"0",lightboxCSS:"",lightboxPreload:!1,disableImageResize:!0,pan:0,panMax:10,panMax2:2,panMin:-10,panMin2:-2,tilt:0,tiltMax:0,tiltMax2:0,tiltMin:-20,tiltMin2:-5,rotateCameraOnMouseMove:!1,rotateCameraOnMouseDrag:!0,lights:!0,lightColor:16777215,lightPositionX:0,lightPositionZ:1400,lightPositionY:350,lightIntensity:.6,shadows:!0,shadowMapSize:1024,shadowOpacity:.2,shadowDistance:15,pageRoughness:1,pageMetalness:0,pageHardness:2,coverHardness:2,pageSegmentsW:5,pageSegmentsH:1,pageMiddleShadowSize:2,pageMiddleShadowColorL:"#999999",pageMiddleShadowColorR:"#777777",antialias:!1,preloaderText:"",fillPreloader:{enabled:!1,imgEmpty:"images/logo_light.png",imgFull:"images/logo_dark.png"},logoImg:"",logoUrl:"",logoCSS:"position:absolute;",logoHideOnMobile:!1,printMenu:!0,downloadMenu:!0,cover:!0,backCover:!0,textLayer:!1,googleAnalyticsTrackingCode:null,strings:{print:"Print",printLeftPage:"Print left page",printRightPage:"Print right page",printCurrentPage:"Print current page",printAllPages:"Print all pages",download:"Download",downloadLeftPage:"Download left page",downloadRightPage:"Download right page",downloadCurrentPage:"Download current page",downloadAllPages:"Download all pages",bookmarks:"Bookmarks",bookmarkLeftPage:"Bookmark left page",bookmarkRightPage:"Bookmark right page",bookmarkCurrentPage:"Bookmark current page",search:"Search",findInDocument:"Find in document",pagesFoundContaining:"pages found containing",thumbnails:"Thumbnails",tableOfContent:"Table of Contents",share:"Share",pressEscToClose:"Press ESC to close"},mobile:{}},FLIPBOOK.Main=function(options,elem){var self=this;this.elem=elem,this.$elem=jQuery(elem),this.$body=jQuery("body"),this.body=this.$body[0],this.$window=jQuery(window),this.bodyHasVerticalScrollbar=function(){return self.body.scrollHeight>window.innerHeight},this.isZoomed=function(){return self.zoom>1},this.options={};var dummyStyle=document.createElement("div").style,vendor=function(){for(var vendors="t,webkitT,MozT,msT,OT".split(","),t,i=0,l=vendors.length;i<l;i++)if((t=vendors[i]+"ransform")in dummyStyle)return vendors[i].substr(0,vendors[i].length-1);return!1}(),prefixStyle=function(style){return""===vendor?style:(style=style.charAt(0).toUpperCase()+style.substr(1),vendor+style)},isAndroid=/android/gi.test(navigator.appVersion),isIDevice=/iphone|ipad/gi.test(navigator.appVersion),has3d=prefixStyle("perspective")in dummyStyle,IEversion;function webgl_detect(return_context){if(window.WebGLRenderingContext){for(var canvas=document.createElement("canvas"),names=["webgl","experimental-webgl","moz-webgl","webkit-3d"],context=!1,i=0;i<4;i++)try{if((context=canvas.getContext(names[i]))&&"function"==typeof context.getParameter)return!return_context||{name:names[i],gl:context}}catch(e){}return!1}return!1}function getInternetExplorerVersion(){var rv=-1;if("Microsoft Internet Explorer"==navigator.appName){var ua=navigator.userAgent,re;null!=(re=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})")).exec(ua)&&(rv=parseFloat(RegExp.$1))}else if("Netscape"==navigator.appName){var ua=navigator.userAgent,re;null!=(re=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})")).exec(ua)&&(rv=parseFloat(RegExp.$1))}return rv}this.msie=window.navigator.userAgent.indexOf("MSIE "),this.isAndroid=isAndroid,this.has3d=has3d,this.hasWebGl=webgl_detect(),getInternetExplorerVersion()>0&&(this.hasWebGl=!1,this.options.isIE=!0),this.thumbsShowing=!1,this.bookmarkShowing=!1,this.searchingString=!1,this.tocShowing=!1,this.menuShowing=!0,this.fullscreenActive=!1;var layouts={2:{currentPage:{vAlign:"bottom",hAlign:"center"},btnAutoplay:{hAlign:"left"},btnSound:{hAlign:"left"},btnExpand:{hAlign:"right"},btnZoomIn:{hAlign:"right"},btnZoomOut:{hAlign:"right"},btnSearch:{hAlign:"left"},btnBookmark:{hAlign:"left"},btnToc:{hAlign:"left"},btnThumbs:{hAlign:"left"},btnShare:{hAlign:"right"},btnPrint:{hAlign:"right"},btnDownloadPages:{hAlign:"right"},btnDownloadPdf:{hAlign:"right"},btnSelect:{hAlign:"right"}},3:{menuTransparent:!0,menu2Transparent:!1,menu2OverBook:!1,menu2Padding:5,btnMargin:5,currentPage:{vAlign:"top",hAlign:"center"},btnPrint:{vAlign:"top",hAlign:"right"},btnDownloadPdf:{vAlign:"top",hAlign:"right"},btnDownloadPages:{vAlign:"top",hAlign:"right"},btnThumbs:{vAlign:"top",hAlign:"left"},btnToc:{vAlign:"top",hAlign:"left"},btnBookmark:{vAlign:"top",hAlign:"left"},btnSearch:{vAlign:"top",hAlign:"left"},btnSelect:{vAlign:"top",hAlign:"right"},btnShare:{vAlign:"top",hAlign:"right"},btnAutoplay:{hAlign:"right"},btnExpand:{hAlign:"right"},btnZoomIn:{hAlign:"right"},btnZoomOut:{hAlign:"right"},btnSound:{hAlign:"right"},menuPadding:5},4:{menu2Transparent:!1,menu2OverBook:!1,sideMenuOverMenu2:!1,currentPage:{vAlign:"top",hAlign:"center"},btnAutoplay:{vAlign:"top",hAlign:"left"},btnSound:{vAlign:"top",hAlign:"left"},btnExpand:{vAlign:"top",hAlign:"right"},btnZoomIn:{vAlign:"top",hAlign:"right"},btnZoomOut:{vAlign:"top",hAlign:"right"},btnSearch:{vAlign:"top",hAlign:"left"},btnBookmark:{vAlign:"top",hAlign:"left"},btnToc:{vAlign:"top",hAlign:"left"},btnThumbs:{vAlign:"top",hAlign:"left"},btnShare:{vAlign:"top",hAlign:"right"},btnPrint:{vAlign:"top",hAlign:"right"},btnDownloadPages:{vAlign:"top",hAlign:"right"},btnDownloadPdf:{vAlign:"top",hAlign:"right"},btnSelect:{vAlign:"top",hAlign:"right"}}},skins={dark:{skinColor:"#EEE",btnColorHover:"#FFF",skinBackground:"#313538"},light:{skinColor:"#222",btnColorHover:"#000",skinBackground:"#FFF",floatingBtnColor:"#FFF",floatingBtnBackground:"#00000055"},gradient:{skinColor:"#EEE",btnColor:"#EEE",btnColorHover:"#FFF",skinBackground:"#313538DD",zoomMin:.85,menuOverBook:!0,menu2OverBook:!0,sideMenuOverMenu:!0,sideMenuOverMenu2:!0,menuBackground:"linear-gradient(to top, rgba(0, 0, 0, 0.65) 0%, transparent 100%)",menu2Background:"linear-gradient(to bottom, rgba(0, 0, 0, 0.65) 0%, transparent 100%)"}};for(var key in skins)options.skin==key&&(options=jQuery.extend(!0,{},skins[key],options));for(var key in layouts)String(options.layout)===key&&(options=jQuery.extend(!0,{},layouts[key],options));this.options=jQuery.extend(!0,{},jQuery.fn.flipBook.options,options);var o=this.options;if(o.isMobile=jQuery.browser.mobile||isIDevice||isAndroid,o.isMobile)for(var key in o.mobile)o[key]=o.mobile[key];function getAndroidVersion(ua){var match=(ua=(ua||navigator.userAgent).toLowerCase()).match(/android\s([0-9\.]*)/);return!!match&&match[1]}if(this.strings=o.strings,o.pageShininess=o.pageShininess/2,this.s=0,o.googleAnalyticsTrackingCode&&(this.gaCode=o.googleAnalyticsTrackingCode,window.ga||function(i,s,o,g,r,a,m){i.GoogleAnalyticsObject=r,i.ga=i.ga||function(){(i.ga.q=i.ga.q||[]).push(arguments)},i.ga.l=1*new Date,a=s.createElement(o),m=s.getElementsByTagName(o)[0],a.async=1,a.src=g,m.parentNode.insertBefore(a,m)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create",this.gaCode,"auto")),jQuery("head").append("<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />"),o.isMobile&&(o.singlePageMode=!!o.singlePageModeIfMobile||o.singlePageMode,o.viewModeMobile&&(o.viewMode=o.viewModeMobile),o.pageTextureSizeMobile&&(o.pageTextureSize=o.pageTextureSizeMobile)),"3dSinglePage"==o.viewMode&&(o.singlePageMode=!0),"2dSinglePage"==o.viewMode&&(o.singlePageMode=!0,o.viewMode="2d"),o.singlePageMode&&("2d"!=o.viewMode&&"swipe"!=o.viewMode&&(o.viewMode="3d"),o.rightToLeft&&(o.viewMode="swipe")),o.singlePageMode&&"3d"==o.viewMode&&(o.rightToLeft=!1),"simple"==o.viewMode&&(o.viewMode="3d",o.instantFlip=!0),"webgl"==o.viewMode&&(!this.hasWebGl||parseFloat(getAndroidVersion())<4.4&&this.isAndroid)&&(o.viewMode="3d"),"3d"!=o.viewMode||self.has3d||(o.viewMode="2d"),this.webgl="webgl"==o.viewMode,o.menuFloating&&(o.menuOverBook=!0,o.sideMenuOverMenu=!0),o.menu2Floating&&(o.menu2OverBook=!0,o.sideMenuOverMenu2=!0),o.menuTransparent&&(o.menuOverBook=!0,o.sideMenuOverMenu=!0,o.menuBackground="none"),o.menu2Transparent?(o.menu2OverBook=!0,o.sideMenuOverMenu2=!0,o.menu2Background="none"):o.sideMenuOverMenu2=!1,o.menuOverBook&&(o.sideMenuOverMenu=!0),o.menu2OverBook&&(o.sideMenuOverMenu2=!0),o.isMobile&&o.pdfBrowserViewerIfMobile&&o.pdfUrl)o.lightBox&&!o.lightBoxOpened?this.$elem.on("touched click",function(){openPdfBrowserViewer()}).css("cursor","pointer"):openPdfBrowserViewer();else if(o.isIE&&o.pdfBrowserViewerIfIE&&o.pdfUrl)o.lightBox&&!o.lightBoxOpened?this.$elem.on("touched click",function(){openPdfBrowserViewer()}).css("cursor","pointer"):openPdfBrowserViewer();else{o.pdfMode=Boolean(o.pdfUrl&&""!=o.pdfUrl);var zl=o.zoomLevels;if(zl){for("string"==typeof zl&&(zl=zl.split(",")),i=0;i<zl.length;i++)zl[i]=Number(zl[i]);o.zoomLevels=zl,o.zoomMin=zl[0]}o.backgroundTransparent&&(o.backgroundColor="none"),this.wrapper=jQuery(document.createElement("div")).addClass("flipbook-main-wrapper"),""!=o.backgroundColor&&this.wrapper.css("background",o.backgroundColor),""!=o.backgroundPattern&&this.wrapper.css("background","url("+o.backgroundPattern+") repeat"),""!=o.backgroundImage&&(this.wrapper.css("background","url("+o.backgroundImage+") no-repeat"),this.wrapper.css("background-size","cover")),this.bookLayer=jQuery(document.createElement("div")).addClass("flipbook-bookLayer").appendTo(self.wrapper),o.hideMenu&&(this.bookLayer.css("bottom","0"),o.menuOverBook=!0),this.book=jQuery(document.createElement("div")).addClass("book").appendTo(self.bookLayer),o.preloader?this.preloader=o.preloader:jQuery(".flipbook-preloader").length&&o.lightBox?this.preloader=jQuery(".flipbook-preloader"):this.preloader=jQuery('<div class="flipbook-preloader cssload-container"><div class="cssload-speeding-wheel"/><div class="flipbook-loading-text"></div><div class="flipbook-loading-bg"></div></div>'),jQuery(".flipbook-loading-text").text(o.preloaderText),this.setLoadingProgress(0),!o.deeplinkingPrefix&&o.deeplinking&&o.deeplinking.prefix&&(o.deeplinkingPrefix=o.deeplinking.prefix),o.deeplinkingEnabled=o.deeplinkingPrefix||o.deeplinkingEnabled||o.deeplinking&&o.deeplinking.enabled,o.deeplinkingEnabled&&(checkHash(),jQuery(window).bind("hashchange",function(e){checkHash()})),this.dispose=function(){this.disposed=!0},o.main=this;var model={_events:{},on:function(type,fn){this._events[type]||(this._events[type]=[]),this._events[type].push(fn)},off:function(type,fn){if(this._events[type]){var index=this._events[type].indexOf(fn);index>-1&&this._events[type].splice(index,1)}},trigger:function(type){if(this._events[type]){var i=0,l=this._events[type].length;if(l)for(;i<l;i++)this._events[type][i].apply(this,[].slice.call(arguments,1))}}};model.on("pageLoaded",function(e){o.pages[e.index]=o.pages[e.index]||{},o.pages[e.index].canvas=o.pages[e.index].canvas||{},o.pages[e.index].canvas[e.size]=e.canvas,self.Book&&self.Book.onPageLoaded&&self.Book.onPageLoaded(e.index,e.size),self.searchingString&&self.mark(self.searchingString)}),model.on("pageUnloaded",function(e){e.unloadedPages.forEach(function(elem){self.Book.onPageUnloaded&&self.Book.onPageUnloaded(elem.index,elem.size)})}),model.on("pdfinit",function(){console.log("pdfinit"),o.tableOfContent=self.pdfService.outline||o.tableOfContent,o.pageMode=self.pdfService.double?"doubleWithCover":"singlePage",o.doublePage=self.pdfService.double,self.viewportOriginal=self.pdfService.viewports[0],o.firstPage={width:self.pdfService.viewports[0].width,height:self.pdfService.viewports[0].height,ratio:self.pdfService.viewports[0].width/self.pdfService.viewports[0].height},self.pdfService.numPages>1&&(o.secondPage={width:self.pdfService.viewports[1].width,height:self.pdfService.viewports[1].height,ratio:self.pdfService.viewports[1].width/self.pdfService.viewports[1].height}),o.numPages=self.pdfService.numPages;for(var pages=[],i=0;i<o.numPages;i++){var p={canvas:{}};o.pages&&o.pages[i]?jQuery.extend(p,o.pages[i]):p.title=i+1,pages[i]=p}o.pages=pages;var bh=self.book.height(),pageSize=o.pageTextureSize;o.pageWidth=parseInt(pageSize*self.viewportOriginal.width/self.viewportOriginal.height),o.pageHeight=pageSize,o.pw=o.pageWidth,o.ph=o.pageHeight,o.zoomSize=o.zoomSize||o.pageTextureSize,self.start()}),model.on("toolSelect",function(){self.bookLayer.removeClass("flipbook-move"),self.btnSelect&&self.btnSelect.addClass("flipbook-btn-active"),jQuery(".flipbook-page-htmlContent").css("userSelect","auto")}),model.on("toolMove",function(){self.bookLayer.addClass("flipbook-move"),self.btnSelect&&self.btnSelect.removeClass("flipbook-btn-active"),jQuery(".flipbook-page-htmlContent").css("userSelect","none")}),this.model=model,o.lightBox?(o.btnClose.enabled=!0,this.lightbox=new FLIPBOOK.Lightbox(this,this.wrapper,o),this.lightboxStartedTimes=0,this.wrapper.css("background","none"),this.bookLayer.css("background","none"),this.book.css("background","none"),this.preloader.appendTo(this.$body).css("position","fixed"),this.$elem.css("cursor","pointer").bind("tap click",function(e){self.lightboxStartPage=jQuery(this).attr("data-page"),self.started?(self.lightboxStart(),o.lightBoxFullscreen&&setTimeout(function(){self.toggleExpand()},0)):(init(),o.lightBoxFullscreen&&setTimeout(function(){self.toggleExpand()},100))}),o.lightBoxOpened?(init(),jQuery(this).trigger("lightboxLoadingStarted")):o.lightboxPreload&&preload(),this.fullscreenElement=document.documentElement):(o.btnClose.enabled=!1,this.preloader.appendTo(this.wrapper),this.wrapper.appendTo(this.$elem),this.fullscreenElement=this.$elem[0],init())}function openPdfBrowserViewer(){o.pdfBrowserViewerFullscreen?window.open(o.pdfUrl,o.pdfBrowserViewerFullscreenTarget):jQuery('<object type="application/pdf"/>').width("100%").height("100%").attr("data",o.pdfUrl).appendTo(self.$elem)}function checkHash(){if(!self.disposed){var targetPage=self.getPageFromHash(),startPage=targetPage;targetPage&&(targetPage=o.rightToLeft?o.pages.length-targetPage+1:targetPage,self.started?self.Book&&(self.lightbox&&(self.lightbox.openLightbox(),self.lightboxStart()),self.goToPage(targetPage,!0)):(o.startPage=startPage,o.lightBox&&(init(),o.lightBoxFullscreen&&setTimeout(function(){self.toggleExpand()},100))))}}function preload(){"undefined"!=typeof IScroll||FLIPBOOK.scriptsAdded[FLIPBOOK.iscrollSrc]||self.loadScript(FLIPBOOK.iscrollSrc,function(){}),o.pdfMode&&("undefined"!=typeof pdfjsLib||FLIPBOOK.scriptsAdded[FLIPBOOK.pdfjsSrc]||self.loadScript(FLIPBOOK.pdfjsSrc,function(){}),void 0!==FLIPBOOK.PdfService||FLIPBOOK.scriptsAdded[FLIPBOOK.pdfServiceSrc]||self.loadScript(FLIPBOOK.pdfServiceSrc,function(){}),o.btnSearch.enabled&&(FLIPBOOK.scriptsAdded[FLIPBOOK.markSrc]||self.loadScript(FLIPBOOK.markSrc,function(){}))),"webgl"==o.viewMode&&("undefined"!=typeof THREE||FLIPBOOK.scriptsAdded[FLIPBOOK.threejsSrc]||self.loadScript(FLIPBOOK.threejsSrc,function(){}))}function init(){if(o.fillPreloader.enabled){self.$fillPreloader=jQuery("<div>").addClass("flipbook-fillPreloader");var empty=new Image;empty.src=o.fillPreloader.imgEmpty,empty.onload=function(){var full=new Image;full.src=o.fillPreloader.imgFull,full.onload=function(){jQuery(empty).appendTo(self.$fillPreloader),self.$fillPreloaderImg=jQuery(full).appendTo(self.$fillPreloader),self.$fillPreloader.appendTo(self.wrapper),initBook()}}}else initBook()}function initBook(){o.pdfMode?self.initPdf(o.btnSearch.enabled):(o.btnSearch.enabled=!1,self.initJpg()),self.setLoadingProgress(.1)}},FLIPBOOK.Main.prototype={start:function(){this.options.dp&&(this.options.doublePage=!0,this.options.pageMode="doubleWithCover"),this.started||(this.model.pageW=this.options.pageWidth,this.model.bookW=2*this.options.pageWidth,this.options.singlePageMode&&(this.model.bookW/=2),this.model.pageH=this.options.pageHeight,this.model.bookH=this.options.pageHeight,this.options.numPages%2==0?this.options.numSheets=(this.options.numPages+2)/2:this.options.numSheets=(this.options.numPages+1)/2,this.started=!0,this.options.lightBox&&(this.lightbox.openLightbox(),this.lightboxStart()),this.createBook(),this.updateSkinColors())},updateSkinColors:function(){var o=this.options;o.skinColor&&this.wrapper.find(".skin-color").css("color",o.skinColor),o.skinBackground&&this.wrapper.find(".skin-color-bg").css("background",o.skinBackground)},lightboxStart:function(){var self=this;this.started||this.start(),void 0!==this.Book?(this.Book.enable(),this.options.contentOnStart&&this.toggleToc(!0),this.options.thumbnailsOnStart&&this.toggleThumbs(!0),this.lightboxStartPage?this.goToPage(this.lightboxStartPage,!0):this.options.lightboxStartPage&&this.goToPage(this.options.lightboxStartPage,!0),this.lightboxStartedTimes++,this.gaCode&&ga("send",{hitType:"event",eventCategory:"Flipbook : "+this.options.name,eventAction:"lightbox open",eventLabel:"lightbox open",eventValue:this.lightboxStartedTimes,nonInteraction:!0}),this.updateCurrentPage(),this.initColors(),this.resize(),jQuery(this).trigger("lightboxOpened")):setTimeout(function(){self.lightboxStart()},100)},setHash:function(page){page<1&&(page=1),this.options.deeplinkingEnabled&&this.Book.enabled&&(window.location.hash="#"+this.options.deeplinkingPrefix+String(page))},clearHash:function(){window.location.hash=""},getPageFromHash:function(){var page=null,string=window.location.hash,substring="#"+this.options.deeplinkingPrefix,hasPrefix;return-1!==string.indexOf(substring)&&(page=parseInt(window.location.hash.replace(/#/g,"").replace(this.options.deeplinkingPrefix,"")),isNaN(page)&&(page=0)),page},initColors:function(){this.wrapper.find(".skin-color-bg").removeClass("flipbook-bg-light").removeClass("flipbook-bg-dark").addClass("flipbook-bg-"+this.options.skin),this.wrapper.find(".skin-color").removeClass("flipbook-color-light").removeClass("flipbook-color-dark").addClass("flipbook-color-"+this.options.skin),this.updateSkinColors()},lightboxEnd:function(){screenfull.isFullscreen&&screenfull.exit(),window.location.hash&&this.clearHash(),this.setLoadingProgress(1),this.Book.disable()},turnPageComplete:function(){this.animating=!1,this.updateCurrentPage();var rightIndex=this.Book.rightIndex||0;this.options.rightToLeft&&(rightIndex=this.options.pages.length-rightIndex),this.pdfService&&this.pdfService.setRightIndex(rightIndex)},updateCurrentPage:function(){if(void 0!==this.currentPage){var rtl=this.options.rightToLeft,total=this.options.numPages,rightIndex=this.Book.rightIndex||0,s;rtl&&(rightIndex=this.options.pages.length-rightIndex),this.options.singlePageMode||this.Book.singlePage?(rtl&&rightIndex--,s=rightIndex+1,this.currentPageNumber=rightIndex,this.setHash(s),this.cPage=[rightIndex]):(rightIndex>total||rightIndex==total&&total%2==0?(s=total,this.cPage=[total-1]):rightIndex<1?(s=1,this.cPage=[0]):(s=String(rightIndex)+"-"+String(rightIndex+1),this.cPage=[rightIndex-1,rightIndex]),this.setHash(rightIndex)),rtl?(this.enableNext(rightIndex>0),this.enablePrev(rightIndex<total-1)):(this.enablePrev(rightIndex>0),this.enableNext(rightIndex<total-1)),2==this.cPage.length?(this.wrapper.find(".c-l-p").show(),this.wrapper.find(".c-r-p").show(),this.wrapper.find(".c-p").hide()):(this.wrapper.find(".c-l-p").hide(),this.wrapper.find(".c-r-p").hide(),this.wrapper.find(".c-p").show()),this.s&&this.options.pdfPageScale>0&&this.goToPage(0),s!=this.currentPageValue&&(this.currentPageValue=String(s),this.currentPage.text(s+" / "+String(total)),this.currentPageInput.width(this.currentPageHolder.width()),this.resize(),jQuery(this).trigger({type:"pagechange",page:this.currentPageValue,name:this.options.name}))}},initJpg:function(){var self=this;1==this.options.numPages&&(this.options.viewMode="swipe",this.options.singlePageMode=!0,this.webgl=!1),this.loadPage(0,this.options.pageTextureSize,function(){if(self.setLoadingProgress(.5),1==self.options.pages.length){var p1=self.options.pages[0].img;self.options.pw=p1.width,self.options.ph=p1.height,self.options.pageWidth=p1.width,self.options.pageHeight=p1.height,self.options.pageMode="singlePage",self.options.doublePage=!1,self.options.zoomSize=self.options.zoomSize||p1.height,self.setLoadingProgress(.7),self.start()}else self.loadPage(1,self.options.pageTextureSize,function(){var p1=self.options.pages[0].img,p2=self.options.pages[1].img,r1=p1.width/p1.height,r2=p2.width/p2.height;self.options.pw=p1.width,self.options.ph=p1.height,self.options.pageWidth=p1.width,self.options.pageHeight=p1.height,self.options.pageMode=r2/r1>1.5?"doubleWithCover":"singlePage",self.options.doublePage=r2/r1>1.5,self.options.zoomSize=self.options.zoomSize||p1.height,self.setLoadingProgress(.7),self.start()})})},initPdf:function(loadAllPages){if(!this.started){("swipe"==this.options.viewMode||this.options.btnSearch.enabled)&&(this.options.textLayer=!0);var self=this;if("undefined"==typeof pdfjsLib){if(!FLIPBOOK.scriptsAdded[FLIPBOOK.pdfjsSrc])return void self.loadScript(FLIPBOOK.pdfjsSrc,function(){self.initPdf(loadAllPages)});if(!FLIPBOOK.scriptsLoaded[FLIPBOOK.pdfjsSrc])return void setTimeout(function(){self.initPdf(loadAllPages)},100)}if(this.setLoadingProgress(.2),void 0===FLIPBOOK.PdfService){if(!FLIPBOOK.scriptsAdded[FLIPBOOK.pdfServiceSrc])return void self.loadScript(FLIPBOOK.pdfServiceSrc,function(){self.initPdf(loadAllPages)});if(!FLIPBOOK.scriptsLoaded[FLIPBOOK.pdfServiceSrc])return void setTimeout(function(){self.initPdf(loadAllPages)},100)}this.setLoadingProgress(.3),window.CanvasPixelArray&&(CanvasPixelArray.prototype.set=function(arr){for(var l=this.length,i=0;i<l;i++)this[i]=arr[i]}),PDFJS=pdfjsLib,pdfjsLib.externalLinkTarget=pdfjsLib.LinkTarget.BLANK,pdfjsLib.GlobalWorkerOptions.workerSrc=this.options.pdfjsworkerSrc||FLIPBOOK.pdfjsworkerSrc,"https:"==location.protocol&&(self.options.pdfUrl=self.options.pdfUrl.replace("http://","https://"));var params={cMapPacked:!0,cMapUrl:"cmaps/",disableAutoFetch:!0,disableStream:!0,url:self.options.pdfUrl};this.pdfinitStarted||(this.pdfinitStarted=!0,pdfjsLib.getDocument(params).then(function(pdf){var numPages;self.pdfDocument=pdf,1==pdf._pdfInfo.numPages&&(self.options.viewMode="swipe",self.options.singlePageMode=!0,self.webgl=!1),self.pdfService=new FLIPBOOK.PdfService(pdf,self.model,self.options),self.options.thumbLoaded=function(c){self.options.thumbs=self.options.thumbs||[],self.options.thumbs[c.index]=c},self.setLoadingProgress(.5);var loadPdfOutline=!self.options.tableOfContent||0==self.options.tableOfContent.length,e=e;self.pdfService.init()}))}},loadPage:function(index,size,callback){var self=this;if(this.options.pdfMode)this.loadPageFromPdf(index,size,callback);else{var self=this,page=this.options.pages[index];page.img?page.imgLoaded?self.pageLoaded({index:index,size:size,image:page.img,htmlContent:page.htmlContentDiv},callback):setTimeout(function(){self.loadPage(index,size,callback)},300):(page.img=document.createElement("img"),page.img.setAttribute("id",index),page.img.onload=function(){page.imgLoaded=!0,page.htmlContent&&(page.htmlContentDiv=jQuery(document.createElement("div")).addClass("flipbook-page-htmlContent").append(jQuery(page.htmlContent))),self.pageLoaded({index:index,size:size,image:page.img,htmlContent:page.htmlContentDiv},callback)},"webgl"==this.options.viewMode&&(page.img.crossOrigin="Anonymous"),"https:"==location.protocol&&(page.src=page.src.replace("http://","https://")),page.img.src=page.src)}},pageLoaded:function(page,callback){callback.call(this,page,callback),this.options.loadAllPages&&page.index<this.options.numPages-1&&this.loadPage(page.index+1,page.size,function(){})},loadPageFromPdf:function(pageIndex,size,callback){var self=this;size=size||this.options.pageTextureSize,this.options.pages[pageIndex]?this.pdfService.renderBookPage(pageIndex,size,callback):callback.call(this)},getString:function(name){return this.options.strings[name]},mark:function(str){var c=jQuery(".flipbook-page-htmlContent");c.unmark({done:function(){c.mark(str,{acrossElements:!0})}})},unmark:function(){var c;this.searchingString=null,jQuery(".flipbook-page-htmlContent").unmark()},setTool:function(tool){this.tool=tool,this.model.trigger(tool)},toggleTool:function(){var tool="toolSelect"==this.tool?"toolMove":"toolSelect";this.setTool(tool)},toggleSound:function(){var o=this.options;o.sound?(o.sound=!1,this.btnSound.$icon.hide(),this.btnSound.$iconAlt.show()):(o.sound=!0,this.btnSound.$icon.show(),this.btnSound.$iconAlt.hide())},scrollPageIntoView:function(obj){var num=this.options.rightToLeft?this.options.pages.length-obj.pageNumber+1:obj.pageNumber;this.goToPage(num)},loadScript:function(src,callback){var self=this,script=document.createElement("script"),prior=document.getElementsByTagName("script")[0];script.async=1,prior.parentNode.insertBefore(script,prior),FLIPBOOK.scriptsAdded[src]=!0,script.onload=script.onreadystatechange=function(_,isAbort){(isAbort||!script.readyState||/loaded|complete/.test(script.readyState))&&(script.onload=script.onreadystatechange=null,script=undefined,isAbort||callback&&callback.call(self),FLIPBOOK.scriptsLoaded[src]=!0)},script.src=src},createBook:function(){var self=this,model=this.model,options=this.options;if("material"!=options.icons||FLIPBOOK.MaterialIconsLoaded||(FLIPBOOK.MaterialIconsLoaded=!0,jQuery("head").append('<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">')),"undefined"==typeof IScroll){if(!FLIPBOOK.scriptsAdded[FLIPBOOK.iscrollSrc])return void self.loadScript(FLIPBOOK.iscrollSrc,self.createBook);if(!FLIPBOOK.scriptsLoaded[FLIPBOOK.iscrollSrc])return void setTimeout(function(){self.createBook()},100)}if(this.options.btnSearch.enabled){if(!FLIPBOOK.scriptsAdded[FLIPBOOK.markSrc])return void self.loadScript(FLIPBOOK.markSrc,self.createBook);if(!FLIPBOOK.scriptsLoaded[FLIPBOOK.markSrc])return void setTimeout(function(){self.createBook()},100)}if(self.setLoadingProgress(.9),"webgl"==self.options.viewMode){if("undefined"==typeof THREE){if(!FLIPBOOK.scriptsAdded[FLIPBOOK.threejsSrc])return void self.loadScript(FLIPBOOK.threejsSrc,self.createBook);if(!FLIPBOOK.scriptsLoaded[FLIPBOOK.threejsSrc])return void setTimeout(function(){self.createBook()},100)}if(void 0===FLIPBOOK.BookWebGL){if(!FLIPBOOK.scriptsAdded[FLIPBOOK.flipbookWebGlSrc])return void self.loadScript(FLIPBOOK.flipbookWebGlSrc,self.createBook);if(!FLIPBOOK.scriptsLoaded[FLIPBOOK.flipbookWebGlSrc])return void setTimeout(function(){self.createBook()},100)}}else if("swipe"==self.options.viewMode){if(void 0===FLIPBOOK.BookSwipe){if(!FLIPBOOK.scriptsAdded[FLIPBOOK.flipBookSwipeSrc])return void self.loadScript(FLIPBOOK.flipBookSwipeSrc,self.createBook);if(!FLIPBOOK.scriptsLoaded[FLIPBOOK.flipBookSwipeSrc])return void setTimeout(function(){self.createBook()},100)}}else if(void 0===FLIPBOOK.Book3){if(!FLIPBOOK.scriptsLoaded[FLIPBOOK.flipbookBook3Src])return void self.loadScript(FLIPBOOK.flipbookBook3Src,self.createBook);if(!FLIPBOOK.scriptsAdded[FLIPBOOK.flipbookBook3Src])return void setTimeout(function(){self.createBook()},100)}if(this.setLoadingProgress(1),this.initEasing(),"doubleWithCover"==self.options.pageMode&&self.options.pages.length>2){for(var newArr=[self.options.pages[0]],i=1;i<=self.options.pages.length-2;i++){var p=self.options.pages[i],left={src:p.src,thumb:p.thumb,title:p.title,htmlContent:p.htmlContent,side:"left"},right={src:p.src,thumb:p.thumb,title:p.title,htmlContent:p.htmlContent,side:"right"};newArr.push(left),newArr.push(right)}newArr.push(self.options.pages[self.options.pages.length-1]),self.options.pages=newArr}if(this.options.numPages=this.options.pages.length,this.options.numPages%2==0||this.options.singlePageMode||(this.oddPages=!0,this.options.oddPages=!0,this.options.pages.push({src:this.options.assets.preloader,thumb:""})),self.options.pages.length>0)for(var i=0;i<self.options.pages.length;i++)void 0!==self.options.pages[i].htmlContent&&(self.options.hasHtmlContent=!0,self.options.pages[i].htmlContent=jQuery(self.options.pages[i].htmlContent));function initSound(){self.flipsound=document.createElement("audio"),self.flipsound.setAttribute("src",self.options.assets.flipMp3),self.flipsound.setAttribute("type","audio/mpeg")}if("webgl"==self.options.viewMode){var bookOptions=self.options;bookOptions.scroll=self.scroll,bookOptions.parent=self,self.Book=new FLIPBOOK.BookWebGL(self.book[0],model,bookOptions),self.webglMode=!0,self.initSwipe(),initSound()}else"swipe"==self.options.viewMode?(self.Book=new FLIPBOOK.BookSwipe(self.book[0],self.bookLayer[0],model,options),self.initSwipe()):("2d"!=self.options.viewMode&&(self.options.viewMode="3d"),self.Book=new FLIPBOOK.Book3(self.book[0],model,options),self.initSwipe(),self.webglMode=!1,initSound());self.Book.enable(),self.book.hide().fadeIn("slow"),this.tocCreated=!1,this.createMenu(),this.onZoom(this.options.zoom),1==this.options.pages.length&&(this.rightToLeft=!1);var $book=jQuery(self.Book);$book.bind("loadPagesFromPdf",function(e,arr,size,callback){self.loadPagesFromPdf(arr,size,callback)}),$book.bind("turnPageComplete",function(e){self.turnPageComplete()}),$book.bind("initEasing",function(e){self.initEasing()}),$book.bind("playFlipSound",function(e){self.playFlipSound()}),$book.bind("closeLightbox",function(e){self.closeLightbox()}),$book.bind("updateCurrentPage",function(e){self.updateCurrentPage()}),this.createLogo(),this.onBookCreated()},onBookCreated:function(){var o=this.options,self=this;jQuery(window).resize(function(){self.resize()}),o.rightToLeft?self.goToPage(Number(o.pages.length-Number(o.startPage)+1),!0):self.goToPage(Number(o.startPage),!0),this.updateCurrentPage(),document.addEventListener("keydown",function(e){if(self.Book.enabled&&(self.options.lightBox||self.fullscreenActive||!self.options.arrowsDisabledNotFullscreen&&!self.bodyHasVerticalScrollbar())){switch((e=e||window.event).keyCode){case 37:self.prevPage();break;case 38:self.zoomIn();break;case 39:self.nextPage();break;case 40:self.zoomOut()}return!1}}),document.addEventListener("MSFullscreenChange",function(e){self.handleFsChange()}),document.addEventListener("mozfullscreenchange",function(e){self.handleFsChange()}),document.addEventListener("webkitfullscreenchange",function(e){self.handleFsChange()}),document.addEventListener("fullscreenchange",function(e){self.handleFsChange()}),this.zoom=o.zoomMin,this.bookLayer.bind("DOMMouseScroll",function(e){if(self.Book.enabled&&(self.options.lightBox||self.fullscreenActive||!self.options.wheelDisabledNotFullscreen&&!self.bodyHasVerticalScrollbar()))return e.stopPropagation(),e.preventDefault(),e.originalEvent.detail>0?self.zoomOut(e.originalEvent):self.zoomIn(e.originalEvent),!1}),this.bookLayer.bind("mousewheel",function(e){if(self.Book.enabled&&(self.options.lightBox||self.fullscreenActive||!self.options.wheelDisabledNotFullscreen&&!self.bodyHasVerticalScrollbar()))return e.stopPropagation(),e.preventDefault(),e.originalEvent.wheelDelta<0?self.zoomOut(e.originalEvent):self.zoomIn(e.originalEvent),!1}),this.setTool("toolMove"),o.contentOnStart&&self.toggleToc(!0),o.thumbnailsOnStart&&self.toggleThumbs(!0),o.autoplayOnStart&&self.toggleAutoplay(!0),self.options.lightBox&&self.Book.disable(),self.Book.updateVisiblePages(),self.initColors(),self.resize(),self.Book.zoomTo(o.zoomMin),setTimeout(function(){self.resize()},200),setTimeout(function(){self.resize()},600),o.onbookcreated&&o.onbookcreated.call(this)},initSwipe:function(){if(1!=this.options.numPages){var self=this;window.jQuery(this.bookLayer).swipe({swipeStatus:function(e,phase,direction,distance,duration,fingerCount,fingerData){if("start"==phase)try{self.currentPageInput.trigger("blur")}catch(e){}if(!self.options.sideNavigationButtons||e.target!==self.arrowL[0]&&e.target!==self.arrowR[0])if(("end"==phase||"cancel"==phase)&&duration<200&&distance<10){if("toolMove"==self.tool&&!self.options.doubleClickZoomDisabled)if(null==self.clickTimer)self.clickTimer=setTimeout(function(){if(self.clickTimer=null,"touchend"==e.type)var posX=e.changedTouches[0].pageX;else if("mouseup"==e.type)var posX=e.offsetX},300);else{clearTimeout(self.clickTimer),self.clickTimer=null;var t=self.options.zoomTime;self.zoom>=self.options.zoomMax?self.zoomTo(self.options.zoomMin,t,e):self.zoomTo(self.options.zoomMax,t,e)}}else{if(("up"==direction||"down"==direction)&&"move"==phase||self.zoom>1||"toolSelect"==self.tool)return;self.Book.onSwipe(e,phase,direction,distance,duration,fingerCount,fingerData)}},pinchStatus:function(event,phase,direction,distance,duration,fingerCount,pinchZoom){"start"==phase&&(self.zoomStart=self.zoom),fingerCount>1&&"move"==phase&&(event.preventDefault(),event.scale&&(pinchZoom=event.scale),self.zoomTo(self.zoomStart*pinchZoom,0,event))},fingers:2,pinchThreshold:0,allowPageScroll:"vertical",preventDefaultEvents:!1}),this.swipeEnabled=!0}},toggleMenu:function(){this.menuShowing?(this.menuShowing=!1,this.bookLayer.css("bottom","0px"),this.menuBottom.fadeOut(),this.currentPageHolder.fadeOut(),jQuery(".flipbook-nav").fadeOut(),this.Book.onResize()):(this.menuShowing=!0,this.bookLayer.css("bottom",this.menuBottom.height()+"px"),this.menuBottom.fadeIn(),this.currentPageHolder.fadeIn(),jQuery(".flipbook-nav").fadeIn(),this.Book.onResize())},createIcon:function(btn,alt,transparent){var o,$icon;return $icon="material"==this.options.icons?jQuery("<i>").addClass("material-icons flipbook-icon-material flipbook-menu-btn skin-color").attr("title",btn.title).text(alt?btn.iconAlt2:btn.icon2):jQuery(document.createElement("span")).attr("aria-hidden","true").addClass(alt?btn.iconAlt:btn.icon).addClass("flipbook-icon-fa flipbook-menu-btn skin-color fa"),transparent||$icon.addClass("skin-color-bg"),$icon},createButton:function(btn){var o=this.options,floating="top"==btn.vAlign&&o.menu2Transparent||"top"!=btn.vAlign&&o.menuTransparent,bgColor=floating?o.floatingBtnBackground:o.btnBackground,color=floating?o.floatingBtnColor:o.btnColor,textShadiw=floating?o.floatingBtnTextShadow:o.btnTextShadow,radius=floating?o.floatingBtnRadius:o.btnRadius,margin=floating?o.floatingBtnMargin:o.btnMargin,$btn=jQuery(document.createElement("span")),material,btnSize="material"==o.icons?o.btnSize+8:o.btnSize,btnWidth=o.btnSize+24;function addCSS($icon){$icon.css({width:btnWidth+"px","font-size":btnSize+"px",margin:margin+"px","border-radius":radius+"px","text-shadow":o.btnTextShadow,"box-shadow":o.btnShadow,border:o.btnBorder,color:color,background:bgColor,"text-shadow":textShadiw}),color&&$icon.removeClass("skin-color"),bgColor&&$icon.removeClass("skin-color-bg")}$btn.$icon=this.createIcon(btn).appendTo($btn),addCSS($btn.$icon),btn.iconAlt2&&($btn.$iconAlt=this.createIcon(btn,!0).appendTo($btn).hide(),addCSS($btn.$iconAlt)),$btn.icon=btn.icon,$btn.iconAlt=btn.iconAlt,btn.onclick&&$btn.bind("tap click",function(e){btn.onclick()}),!floating&&(o.btnColorHover||o.btnBackgroundHover||o.btnBorderHover)&&$btn.mouseenter(function(){$btn.$icon.css({color:o.btnColorHover,background:o.btnBackgroundHover,border:o.btnBorderHover}),$btn.$iconAlt&&$btn.$iconAlt.css({color:o.btnColorHover,background:o.btnBackgroundHover,border:o.btnBorderHover})}).mouseleave(function(){$btn.$icon.css({color:o.btnColor,background:o.btnBackground,border:o.btnBorder}),$btn.$iconAlt&&$btn.$iconAlt.css({color:o.btnColor,background:o.btnBackground,border:o.btnBorder})});var menu,cssClass="";return menu="top"==btn.vAlign?o.menu2Floating?this.menuTC:"left"==btn.hAlign?this.menuTL:"right"==btn.hAlign?this.menuTR:this.menuTC:o.menuFloating?this.menuBC:"left"==btn.hAlign?this.menuBL:"right"==btn.hAlign?this.menuBR:this.menuBC,$btn.attr("data-name",btn.name).appendTo(menu).attr("title",btn.title).addClass("").css("order",btn.order),$btn},createMenu:function(){var o=this.options,menuBottomClass=o.menuFloating?"flipbook-menu-floating":"flipbook-menu-fixed",menuTopClass=o.menu2Floating?"flipbook-menu-floating":"flipbook-menu-fixed",self=this;this.menuBottom=jQuery(document.createElement("div")).addClass("flipbook-menuBottom").addClass(menuBottomClass).appendTo(this.wrapper).css({background:o.menuBackground,"box-shadow":o.menuShadow,margin:o.menuMargin+"px",padding:o.menuPadding+"px"}),o.menuTransparent||o.menuBackground||this.menuBottom.addClass("skin-color-bg"),o.hideMenu&&this.menuBottom.hide(),this.menuTop=jQuery(document.createElement("div")).addClass("flipbook-menuTop").addClass(menuTopClass).appendTo(this.wrapper).css({background:o.menu2Background,"box-shadow":o.menu2Shadow,margin:o.menu2Margin+"px",padding:o.menu2Padding+"px"}),o.menu2Transparent||o.menu2Background||this.menuTop.addClass("skin-color-bg"),"swipe"==o.viewMode&&(o.btnSound.enabled=!1),this.menuBL=jQuery(document.createElement("div")).addClass("flipbook-menu flipbook-menu-left").appendTo(this.menuBottom),this.menuBC=jQuery(document.createElement("div")).addClass("flipbook-menu flipbook-menu-center").appendTo(this.menuBottom),this.menuBR=jQuery(document.createElement("div")).addClass("flipbook-menu flipbook-menu-right").appendTo(this.menuBottom),this.menuTL=jQuery(document.createElement("div")).addClass("flipbook-menu flipbook-menu-left").appendTo(this.menuTop),this.menuTC=jQuery(document.createElement("div")).addClass("flipbook-menu flipbook-menu-center").appendTo(this.menuTop),this.menuTR=jQuery(document.createElement("div")).addClass("flipbook-menu flipbook-menu-right").appendTo(this.menuTop),o.isMobile&&(void 0!==o.btnTocIfMobile&&(o.btnToc.hideOnMobile=!o.btnTocIfMobile),void 0!==o.btnThumbsIfMobile&&(o.btnThumbs.hideOnMobile=!o.btnThumbsIfMobile),void 0!==o.btnShareIfMobile&&(o.btnShare.hideOnMobile=!o.btnShareIfMobile),void 0!==o.btnDownloadPagesIfMobile&&(o.btnDownloadPages.hideOnMobile=!o.btnDownloadPagesIfMobile),void 0!==o.btnDownloadPdfIfMobile&&(o.btnDownloadPdf.hideOnMobile=!o.btnDownloadPdfIfMobile),void 0!==o.btnSoundIfMobile&&(o.btnSound.hideOnMobile=!o.btnSoundIfMobile),void 0!==o.btnExpandIfMobile&&(o.btnExpand.hideOnMobile=!o.btnExpandIfMobile),void 0!==o.btnPrintIfMobile&&(o.btnPrint.hideOnMobile=!o.btnPrintIfMobile)),o.sideNavigationButtons&&(this.btnNext=jQuery('<div class="flipbook-nav"><div class="flipbook-arrow-wrapper"></div></div>').appendTo(this.bookLayer).bind("tap click",function(e){self.btnNext.disabled||(self.btnNext.disabled=!0,setTimeout(function(){self.btnNext.disabled=!1},300),e.stopPropagation(),e.preventDefault(),self.nextPage())}),this.arrowR=this.createIcon(o.btnNext).appendTo(this.btnNext.first()).addClass("flipbook-right-arrow").css({width:o.sideBtnSize+"px",height:o.sideBtnSize+"px","font-size":o.sideBtnSize+"px","border-radius":o.sideBtnRadius+"px","margin-top":String(-o.sideBtnSize/2)+"px","margin-right":o.sideBtnMargin+"px",padding:o.sideBtnPaddingV+"px "+o.sideBtnPaddingH+"px","text-shadow":o.sideBtnTextShadow,"box-shadow":o.sideBtnShadow,border:o.sideBtnBorder,color:o.sideBtnColor,background:o.sideBtnBackground,"box-sizing":"initial"}),o.sideBtnColor&&this.arrowR.removeClass("skin-color"),o.sideBtnBackground&&this.arrowR.removeClass("skin-color-bg"),this.btnPrev=jQuery('<div class="flipbook-nav"><div class="flipbook-arrow-wrapper"></div></div>').appendTo(self.bookLayer).bind("tap click",function(e){self.btnPrev.disabled||(self.btnPrev.disabled=!0,setTimeout(function(){self.btnPrev.disabled=!1},300),e.stopPropagation(),e.preventDefault(),self.prevPage())}),this.arrowL=this.createIcon(o.btnPrev).appendTo(this.btnPrev.first()).addClass("flipbook-left-arrow").css({width:o.sideBtnSize+"px",height:o.sideBtnSize+"px","font-size":o.sideBtnSize+"px","border-radius":o.sideBtnRadius+"px","margin-top":String(-o.sideBtnSize/2)+"px","margin-left":o.sideBtnMargin+"px",padding:o.sideBtnPaddingV+"px "+o.sideBtnPaddingH+"px","text-shadow":o.sideBtnTextShadow,"box-shadow":o.sideBtnShadow,border:o.sideBtnBorder,color:o.sideBtnColor,background:o.sideBtnBackground,"box-sizing":"initial"}),o.sideBtnColor&&this.arrowL.removeClass("skin-color"),o.sideBtnBackground&&this.arrowL.removeClass("skin-color-bg"),o.btnFirst.enabled&&(this.btnFirst=jQuery('<div class="flipbook-nav"><div class="flipbook-arrow-wrapper"></div></div>').appendTo(this.bookLayer).bind("tap click",function(e){self.btnFirst.disabled||(self.btnFirst.disabled=!0,setTimeout(function(){self.btnFirst.disabled=!1},300),e.stopPropagation(),e.preventDefault(),self.firstPage())}),this.arrowFirst=this.createIcon(o.btnFirst).appendTo(this.btnFirst.first()).addClass("flipbook-first-arrow").css({width:o.sideBtnSize+"px",height:.66*o.sideBtnSize+"px","font-size":.66*o.sideBtnSize+"px","border-radius":o.sideBtnRadius+"px","margin-top":String(o.sideBtnSize/2+o.sideBtnMargin+2*o.sideBtnPaddingV)+"px","margin-left":o.sideBtnMargin+"px",padding:o.sideBtnPaddingV+"px "+o.sideBtnPaddingH+"px","text-shadow":o.sideBtnTextShadow,"box-shadow":o.sideBtnShadow,border:o.sideBtnBorder,color:o.sideBtnColor,background:o.sideBtnBackground,"box-sizing":"initial"}),o.sideBtnColor&&this.arrowFirst.removeClass("skin-color"),o.sideBtnBackground&&this.arrowFirst.removeClass("skin-color-bg")),o.btnLast.enabled&&(this.btnLast=this.createIcon(o.btnFirst).appendTo(this.btnFirst.first()).appendTo(self.bookLayer).bind("tap click",function(e){self.btnLast.disabled||(self.btnLast.disabled=!0,setTimeout(function(){self.btnLast.disabled=!1},300),e.stopPropagation(),e.preventDefault(),self.lastPage())}),this.arrowLast=this.createIcon(o.btnLast).appendTo(this.btnLast.first()).addClass("flipbook-last-arrow").css({width:o.sideBtnSize+"px",height:.66*o.sideBtnSize+"px","font-size":.66*o.sideBtnSize+"px","border-radius":o.sideBtnRadius+"px","margin-top":String(o.sideBtnSize/2+o.sideBtnMargin+2*o.sideBtnPaddingV)+"px","margin-right":o.sideBtnMargin+"px",padding:o.sideBtnPaddingV+"px "+o.sideBtnPaddingH+"px","text-shadow":o.sideBtnTextShadow,"box-shadow":o.sideBtnShadow,border:o.sideBtnBorder,color:o.sideBtnColor,background:o.sideBtnBackground,"box-sizing":"initial"}),o.sideBtnColor&&this.arrowLast.removeClass("skin-color"),o.sideBtnBackground&&this.arrowLast.removeClass("skin-color-bg")),o.btnOrder.indexOf("btnFirst")>=0&&o.btnOrder.splice(o.btnOrder.indexOf("btnFirst"),1),o.btnOrder.indexOf("btnPrev")>=0&&o.btnOrder.splice(o.btnOrder.indexOf("btnPrev"),1),o.btnOrder.indexOf("btnNext")>=0&&o.btnOrder.splice(o.btnOrder.indexOf("btnNext"),1),o.btnOrder.indexOf("btnLast")>=0&&o.btnOrder.splice(o.btnOrder.indexOf("btnLast"),1)),o.pdfMode&&!o.btnDownloadPdf.url&&(o.btnDownloadPdf.url=o.pdfUrl),o.textLayer||(o.btnSelect.enabled=!1);for(var i=0;i<o.btnOrder.length;i++){var btnName=o.btnOrder[i],btn=o[btnName];o.isMobile&&btn.hideOnMobile&&(btn.enabled=!1),btn.enabled&&(btn.name=btnName,"currentPage"==btn.name?this.createCurrentPage():this[btnName]=this.createButton(btn).bind("touchend click",function(e){e.stopPropagation(),e.preventDefault(),self.onButtonClick(this,e)}))}if(o.buttons)for(var i=0;i<o.buttons.length;i++){var btn=o.buttons[i];self.createButton(btn).index(1)}},onButtonClick:function(btn,e){var name=jQuery(btn).attr("data-name"),o=this.options;switch(name){case"btnFirst":this.firstPage();break;case"btnPrev":this.prevPage();break;case"btnNext":this.nextPage();break;case"btnLast":this.lastPage();break;case"btnZoomIn":this.zoomIn();break;case"btnZoomOut":this.zoomOut();break;case"btnAutoplay":this.autoplay||this.nextPage(),this.toggleAutoplay();break;case"btnSearch":this.toggleSearch();break;case"btnBookmark":this.toggleBookmark();break;case"btnRotateLeft":this.Book.rotateLeft&&this.Book.rotateLeft();break;case"btnRotateRight":this.Book.rotateRight&&this.Book.rotateRight();break;case"btnToc":this.toggleToc();break;case"btnThumbs":this.toggleThumbs();break;case"btnShare":this.toggleShareMenu();break;case"btnDownloadPages":if(o.downloadMenu)this.toggleDownloadMenu();else{var link=document.createElement("a");link.href=o.btnDownloadPages.url,link.download=o.btnDownloadPages.name,link.dispatchEvent(new MouseEvent("click"))}break;case"btnPrint":o.printMenu?this.togglePrintMenu():this.togglePrintWindow();break;case"btnDownloadPdf":if(o.btnDownloadPdf.forceDownload){var path=o.btnDownloadPdf.url,save=document.createElement("a");save.href=path;var filename=save.href.split("/").pop().split("#")[0].split("?")[0];save.download=filename,document.body.appendChild(save),save.click(),document.body.removeChild(save)}else{var target=o.btnDownloadPdf.openInNewWindow||(o.btnDownloadPdf.openInNewWindow,1)?"_blank":"_self";window.open(o.btnDownloadPdf.url,target)}this.gaCode&&ga("send",{hitType:"event",eventCategory:"Flipbook : "+o.name,eventAction:"download PDF",eventLabel:o.btnDownloadPdf.url,nonInteraction:!0});break;case"btnSound":this.toggleSound();break;case"btnSelect":this.toggleTool();break;case"btnExpand":this.toggleExpand();break;case"btnClose":this.lightbox.closeLightbox()}},handleFsChange:function(e){if(this.Book&&this.Book.enabled){var $el=jQuery(this.fullscreenElement),currentFullscreenElement;(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)===this.fullscreenElement||this.isFullscreen?(this.btnExpand.$icon.hide(),this.btnExpand.$iconAlt.show(),$el.addClass("flipbook-browser-fullscreen"),this.fullscreenActive=!0,this.options.onfullscreenenter&&this.options.onfullscreenenter.call(this)):(this.btnExpand.$icon.show(),this.btnExpand.$iconAlt.hide(),$el.removeClass("flipbook-browser-fullscreen"),this.fullscreenActive=!1,this.options.onfullscreenexit&&this.options.onfullscreenexit.call(this)),this.triggerResizeOnce()}},createLogo:function(){var o=this.options;if(o.logoImg&&(!o.isMobile||!o.logoHideOnMobile)){var $logo=jQuery("<img>").attr("src",o.logoImg).attr("style",o.logoCSS).appendTo(this.wrapper);"right"==o.logoAlignH&&$logo.css("right","0"),"bottom"==o.logoAlignV&&$logo.css("bottom","0"),o.logoUrl&&$logo.bind("touchend click",function(){window.open(o.logoUrl,"_blank")})}},setLoadingProgress:function(percent){this.disposed||(this.$fillPreloader?this.setFillPreloaderProgress(percent):percent>0&&percent<1?jQuery(this.preloader).stop(!0,!0).show():jQuery(this.preloader).stop(!0,!0).hide())},setFillPreloaderProgress:function(percent){if(this.$fillPreloader)if(percent>0&&percent<1){if(this.fillPreloaderProgress=this.fillPreloaderProgress||0,percent<this.fillPreloaderProgress)return;this.fillPreloaderProgress=percent;var img=this.$fillPreloaderImg[0];img.style.clip="rect(0px,"+img.width*percent+"px,"+img.height+"px,0px)",this.$fillPreloader.show()}else this.$fillPreloader.hide()},createNavigation:function(){var self=this;this.navLeft=jQuery("<div />"),this.navLeft.css("background","#f00").css("left","0").css("top","200px").attr("aria-hidden","true").addClass("skin-color fa fa-chevron-left fa-5x").css("margin-top",this.navLeft.height()+"px").bind("touchend click",function(e){e.stopPropagation(),e.preventDefault(),self.prevPage()}),this.navRight=jQuery("<div />").appendTo(this.bookLayer).css("position","absolute").css("width","200px").css("height","200px").css("margin-top","-100px").css("background","#f00").css("right","0").css("top","200px").bind("touchend click",function(e){e.stopPropagation(),e.preventDefault(),self.nextPage()})},playFlipSound:function(){var self=this;this.options.sound&&this.Book.enabled&&void 0!==this.flipsound.play&&(this.flipsound.currentTime=0,setTimeout(function(){try{self.flipsound.play()}catch(e){}},100))},onMouseWheel:function(e){if("wheelDeltaX"in e)wheelDeltaX=e.wheelDeltaX/12,wheelDeltaY=e.wheelDeltaY/12;else if("wheelDelta"in e)wheelDeltaX=wheelDeltaY=e.wheelDelta/12;else{if(!("detail"in e))return;wheelDeltaX=wheelDeltaY=3*-e.detail}wheelDeltaX>0?this.zoomIn(e):this.zoomOut(e)},zoomTo:function(val,time,e){var x,y;this.zoom=val,void 0===e?(x=this.model.wrapperW/2,y=this.model.wrapperH/2):(e.touches&&e.touches[0]?(x=e.touches[0].pageX,y=e.touches[0].pageY):e.changedTouches&&e.changedTouches[0]?(x=e.changedTouches[0].pageX,y=e.changedTouches[0].pageY):(x=e.pageX,y=e.pageY),x-=this.wrapper.offset().left,y-=this.wrapper.offset().top),this.zoom<this.options.zoomMin&&(this.zoom=this.options.zoomMin),this.zoom>this.options.zoomMax&&(this.zoom=this.options.zoomMax),this.model.zoom=this.zoom,this.Book.zoomTo(this.zoom,time,x,y),this.onZoom(this.zoom)},zoomOut:function(e){var newZoom=this.zoom/this.options.zoomStep;if(newZoom=newZoom<this.options.zoomMin?this.options.zoomMin:newZoom,this.zoom!=newZoom){this.zoom=newZoom;var t=this.options.zoomTime;this.zoomTo(this.zoom,t,e)}},zoomIn:function(e){var newZoom=this.zoom*this.options.zoomStep;if(this.bookLayer.height()*newZoom>this.options.zoomSize&&(newZoom=this.options.zoomSize/this.bookLayer.height()),this.zoom!=newZoom){this.zoom=newZoom;var t=this.options.zoomTime;this.zoomTo(this.zoom,t,e)}},nextPage:function(){this.Book&&this.Book.nextPage()},prevPage:function(){this.Book&&this.Book.prevPage()},firstPage:function(){this.goToPage(1)},lastPage:function(){this.goToPage(this.options.pages.length)},goToPage:function(pageNumber,instant){this.Book&&this.Book.goToPage(pageNumber,instant)},onZoom:function(newZoom){this.zoom=newZoom,this.enableButton(this.btnZoomIn,newZoom<this.options.zoomMax),this.enableButton(this.btnZoomOut,newZoom>this.options.zoomMin),this.enableSwipe(newZoom<=1),this.model.zoom=newZoom},enableSwipe:function(val){this.swipeEnabled=val},createCurrentPage:function(){var self=this,o=this.options,menu,cssClass="flipbook-currentPageHolder ";menu="top"==o.currentPage.vAlign?"left"==o.currentPage.hAlign?this.menuTL:"right"==o.currentPage.hAlign?this.menuTR:this.menuTC:"left"==o.currentPage.hAlign?this.menuBL:"right"==o.currentPage.hAlign?this.menuBR:this.menuBC;var floating="top"==o.currentPage.vAlign&&o.menu2Transparent||"top"!=o.currentPage.vAlign&&o.menuTransparent,bgColor=floating?o.floatingBtnBackground:"",color=floating?o.floatingBtnColor:o.btnColor,textShadiw=floating?o.floatingBtnTextShadow:"",radius=floating?o.floatingBtnRadius:o.btnRadius,margin=floating?o.floatingBtnMargin:o.btnMargin,currentPageHolder=jQuery("<div>").appendTo(menu);currentPageHolder.css("margin",o.currentPage.marginV+"px "+o.currentPage.marginH+"px"),floating||(cssClass+="skin-color "),currentPageHolder.addClass(cssClass).css({color:color,background:bgColor,"text-shadow":textShadiw,"border-radius":radius+"px"}),o.currentPage.order&&currentPageHolder.css("order",o.currentPage.order),this.currentPageHolder=currentPageHolder,this.currentPage=jQuery(document.createElement("div")).addClass("flipbook-currentPageNumber").appendTo(currentPageHolder);var $form=jQuery("<form>").appendTo(currentPageHolder).submit(function(e){var value=parseInt(self.currentPageInput.val());return value=value>o.pages.length?o.pages.length:value,self.options.rightToLeft&&(value=o.pages.length-value+1),self.goToPage(value),self.currentPageInput.trigger("blur"),!1});this.currentPageInput=jQuery('<input type="text" maxlength="4">').addClass("flipbook-currentPageInput").css({margin:o.currentPage.marginV+"px "+o.currentPage.marginH+"px",color:color}).appendTo($form).val("").focus(function(){self.currentPageInput.val(""),self.currentPage.addClass("flipbook-color-transparent")}).blur(function(){self.currentPageInput.val(""),self.currentPage.removeClass("flipbook-color-transparent")}),floating||this.currentPageInput.addClass("skin-color")},createMenuHeader:function(elem,title,onClose){var self=this,header=jQuery("<div>").addClass("flipbook-menu-header skin-clor flipbook-font").appendTo(elem),title=jQuery("<span>").text(title).addClass("flipbook-menu-title skin-color").appendTo(header),btnClose=jQuery("<span>").appendTo(header).addClass("flipbook-btn-close").bind("touchend click",function(e){e.stopPropagation(),e.preventDefault(),self.closeMenus()}),$icon=this.createIcon(this.options.btnClose,null,!0).appendTo(btnClose)},createToc:function(){var self=this,tocArray=this.options.tableOfContent;if(tocArray||!this.pdfService||this.pdfService.outlineLoaded){if(this.tocHolder=jQuery("<div>").addClass("flipbook-tocHolder flipbook-side-menu skin-color-bg").appendTo(this.wrapper).hide(),this.createMenuHeader(this.tocHolder,this.strings.tableOfContent,this.toggleToc),this.toc=jQuery("<div>").addClass("flipbook-toc").appendTo(this.tocHolder),this.tocScroller=jQuery("<div>").addClass("flipbook-toc-scroller").appendTo(this.toc),this.tocScroll=new FLIPBOOK.IScroll(self.toc[0],{bounce:!1,mouseWheel:!0,scrollbars:!0,interactiveScrollbars:!0}),tocArray&&tocArray.length>0)for(var pages=this.options.pages,i=0;i<tocArray.length;i++)this.createTocItem(tocArray[i]);else for(var arr=this.options.pages,i=0;i<arr.length;i++){var title=arr[i].title;if(""!=title&&void 0!==title){var page,item={title:title,page:String(i+1)};this.createTocItem(item)}}this.initColors(),this.tocScroll.refresh(),this.tocCreated=!0,this.toggleToc()}else self.pdfService.loadOutline(function(outline){self.options.tableOfContent=outline,self.createToc()})},createTocItem:function(item,parent,level){var self=this,parent=parent||this.tocScroller,tocItem=jQuery(document.createElement("a")).attr("class","flipbook-tocItem").addClass("skin-color").appendTo(parent).bind("touchend click",function(e){if(e.stopPropagation(),e.preventDefault(),!self.tocScroll.moved)if(self.options.tableOfContentCloseOnClick&&self.toggleToc(!1),!item.page&&item.dest)self.pdfService.pdfDocument.getPageIndex(item.dest[0]).then(function(index){var targetPage=index+1;targetPage=self.options.rightToLeft?self.options.pages.length-targetPage+1:targetPage,setTimeout(function(){self.goToPage(targetPage)},200)});else{var targetPage=item.page;targetPage=self.options.rightToLeft?self.options.pages.length-targetPage+1:targetPage,setTimeout(function(){self.goToPage(targetPage)},200)}});level||(level=0),tocItem.level=level,tocItem.css("padding","8px 0"),tocItem.css("margin-left","10px"),level?(tocItem.css("margin-top","8px"),tocItem.css("padding-bottom","0")):(tocItem.css("margin-right","15px"),tocItem.css("padding-left","10px"));var expandBtn=jQuery(document.createElement("span")).appendTo(tocItem).css("width","20px").css("display","inline-block").css("cursor","auto").bind("touchend click",function(e){e.stopPropagation(),e.preventDefault();for(var i=0;i<tocItem.items.length;i++)tocItem.items[i].toggle();$icon.toggle(),$icon2.toggle(),self.tocScroll.refresh()}),$icon=jQuery("<span>").attr("aria-hidden","true").appendTo(expandBtn).addClass("fa fa-chevron-right skin-color").hide(),$icon2=jQuery("<span>").attr("aria-hidden","true").appendTo(expandBtn).addClass("fa fa-chevron-down skin-color").hide();if(jQuery(document.createElement("span")).appendTo(tocItem).addClass("title").text(item.title).css("width",String(170-10*tocItem.level)+"px"),jQuery(document.createElement("span")).appendTo(tocItem).attr("class","right").text(item.page),item.items&&item.items.length){tocItem.items=[];for(var i=0;i<item.items.length;i++){var subItem=this.createTocItem(item.items[i],tocItem,tocItem.level+1);tocItem.items.push(subItem),subItem.hide()}$icon.show()}return tocItem},enablePrev:function(val){this.enableButton(this.btnPrev,val),this.enableButton(this.btnFirst,val),this.Book.enablePrev(val)},enableNext:function(val){this.enableButton(this.btnNext,val),this.enableButton(this.btnLast,val),this.Book.enableNext(val)},enableButton:function(button,enabled){void 0!==button&&(enabled?(button.css("opacity","1"),button.css("pointer-events","auto")):(button.css("opacity","0.2"),button.css("pointer-events","none")),button.enabled=enabled)},resize:function(){if(this.Book&&this.Book.enabled){var o=this.options;!o.menuOverBook&&this.menuShowing&&this.menuBottom?this.bookLayer.css("bottom",this.menuBottom.outerHeight()+"px"):this.bookLayer.css("bottom","0px"),!o.menu2OverBook&&this.menuShowing&&this.menuTop?this.bookLayer.css("top",this.menuTop.outerHeight()+"px"):this.bookLayer.css("top","0px"),this.tocShowing||this.thumbsShowing||this.searchShowing||this.bookmarkShowing?(o.sideMenuOverBook||this.bookLayer.css("left","250px"),this.options.sideMenuOverMenu||this.wrapper.find(".flipbook-side-menu").css("bottom",this.menuBottom.outerHeight()+"px"),this.options.sideMenuOverMenu2||this.wrapper.find(".flipbook-side-menu").css("top",this.menuTop.outerHeight()+"px")):this.bookLayer.css("left","0px");var model=this.model;model.wrapperW=this.bookLayer.width(),model.wrapperH=this.bookLayer.height(),o.zoomMax=o.zoomSize/model.wrapperH,model.zoom=o.zoomMin,this.Book.onResize()}},pdfResize:function(){var self=this;this.Book.onZoom()},createThumbs:function(){this.thumbs=new FLIPBOOK.Thumbnails(this)},toggleThumbs:function(value){this.thumbs||this.createThumbs(),void 0!==value&&(this.thumbsShowing=!value),this.thumbsShowing?(this.thumbs.hide(),this.thumbsShowing=!1):(this.closeMenus(),this.thumbs.show(),this.thumbsShowing=!0),this.resize()},toggleToc:function(value){this.tocCreated?(!this.tocShowing||value?(this.closeMenus(),this.tocShowing=!0,this.tocHolder.show(),this.tocScroll.refresh()):(this.tocHolder.hide(),this.tocShowing=!1),this.resize()):this.createToc()},toggleSearch:function(value){this.thumbs||this.createThumbs(),void 0!==value&&(this.searchShowing=!value),this.searchShowing?(this.thumbs.hide(),this.searchShowing=!1,this.unmark()):(this.closeMenus(),this.thumbs.show(),this.thumbs.showSearch(),this.searchShowing=!0),this.resize()},toggleBookmark:function(value){this.thumbs||this.createThumbs(),void 0!==value&&(this.bookmarkShowing=!value),this.bookmarkShowing?(this.thumbs.hide(),this.bookmarkShowing=!1):(this.closeMenus(),this.thumbs.show(),this.thumbs.showBookmarks(),this.bookmarkShowing=!0),this.resize()},closeMenus:function(){this.thumbsShowing&&this.toggleThumbs(),this.tocShowing&&this.toggleToc(),this.searchShowing&&this.toggleSearch(),this.bookmarkShowing&&this.toggleBookmark(),this.printMenuShowing&&this.togglePrintMenu(),this.dlMenuShowing&&this.toggleDownloadMenu(),this.shareMenuShowing&&this.toggleShareMenu()},togglePrintMenu:function(){var self=this;if(this.printMenu)this.printMenuShowing?(this.printMenu.hide(),this.printMenuShowing=!1):(this.closeMenus(),this.printMenu.show(),this.printMenuShowing=!0,this.updateCurrentPage());else{this.printMenu=jQuery('<div class="flipbook-sub-menu flipbook-font">').appendTo(this.wrapper);var center=jQuery('<idv class="flipbook-sub-menu-center">').appendTo(this.printMenu),content=jQuery('<idv class="flipbook-sub-menu-content skin-color-bg">').appendTo(center);this.createMenuHeader(content,this.strings.print,this.togglePrintMenu);var current=jQuery('<a><div class="c-p skin-color flipbook-btn">'+this.strings.printCurrentPage+"</div></a>").appendTo(content).bind("touchend click",function(e){self.printPage(self.cPage[0],this)}),left=jQuery('<a><div class="c-l-p skin-color flipbook-btn">'+this.strings.printLeftPage+"</div></a>").appendTo(this.printMenu).appendTo(content).bind("touchend click",function(e){self.printPage(self.cPage[0],this)}),right=jQuery('<a><div class="c-r-p skin-color flipbook-btn">'+this.strings.printRightPage+"</div></a>").appendTo(this.printMenu).appendTo(content).bind("touchend click",function(e){self.printPage(self.cPage[1],this)}),all=jQuery('<a><div class="skin-color flipbook-btn">'+this.strings.printAllPages+"</div></a>").appendTo(content).bind("touchend click",function(e){self.togglePrintWindow()});this.closeMenus(),this.printMenuShowing=!0,this.initColors(),this.updateCurrentPage()}},toggleDownloadMenu:function(){var self=this;if(this.dlMenu)this.dlMenuShowing?(this.dlMenu.hide(),this.dlMenuShowing=!1):(this.dlMenu.show(),this.closeMenus(),this.dlMenuShowing=!0,this.updateCurrentPage());else{this.dlMenu=jQuery('<div class="flipbook-sub-menu flipbook-font">').appendTo(this.wrapper);var center=jQuery('<idv class="flipbook-sub-menu-center">').appendTo(this.dlMenu),content=jQuery('<idv class="flipbook-sub-menu-content skin-color-bg">').appendTo(center);this.createMenuHeader(content,this.strings.download,this.toggleDownloadMenu);var current=jQuery('<a><div class="c-p skin-color flipbook-btn">'+this.strings.downloadCurrentPage+"</div></a>").appendTo(content).bind("touchend click",function(e){self.downloadPage(self.cPage[0],this)}),left=jQuery('<a><div class="c-l-p skin-color flipbook-btn">'+this.strings.downloadLeftPage+"</div></a>").appendTo(content).bind("touchend click",function(e){self.downloadPage(self.cPage[0],this)}),right=jQuery('<a><div class="c-r-p skin-color flipbook-btn">'+this.strings.downloadRightPage+"</div></a>").appendTo(content).bind("touchend click",function(e){self.downloadPage(self.cPage[1],this)}),all=jQuery('<a><div class="skin-color flipbook-btn">'+this.strings.downloadAllPages+"</div></a>").appendTo(content).bind("touchend click",function(e){var link=document.createElement("a");link.href=self.options.btnDownloadPages.url;var filename=link.href.split("/").pop().split("#")[0].split("?")[0];link.download=filename,link.dispatchEvent(new MouseEvent("click"))});this.closeMenus(),this.dlMenuShowing=!0,this.initColors(),this.updateCurrentPage()}},toggleShareMenu:function(){var self=this;if(this.shareMenu)this.shareMenuShowing?(this.shareMenu.hide(),this.shareMenuShowing=!1):(this.shareMenu.show(),this.closeMenus(),this.shareMenuShowing=!0);else{this.shareMenu=jQuery('<div class="flipbook-sub-menu flipbook-font">').appendTo(this.wrapper);var center=jQuery('<idv class="flipbook-sub-menu-center">').appendTo(this.shareMenu),content=jQuery('<idv class="flipbook-sub-menu-content skin-color-bg">').appendTo(center);this.createMenuHeader(content,"Share",this.toggleShareMenu);var shareBtn=jQuery('<idv class="flipbook-share">').appendTo(content),o=this.options;this.share=new Share(shareBtn[0],{networks:{google_plus:o.google_plus,twitter:o.twitter,facebook:o.facebook,pinterest:o.pinterest,email:o.email}}),this.closeMenus(),this.shareMenuShowing=!0,this.initColors()}},bookmarkPage:function(index){var arr=this.getBookmarkedPages();arr.indexOf(String(index))<0&&arr.push(index),this.setBookmarkedPages(arr),this.thumbs.showBookmarkedThumbs(),this.bookmarkShowing||this.toggleBookmark()},removeBookmark:function(index){var arr=this.getBookmarkedPages();arr.indexOf(String(index))>-1&&arr.splice(arr.indexOf(String(index)),1),this.setBookmarkedPages(arr),this.thumbs.showBookmarkedThumbs(),this.bookmarkShowing||this.toggleBookmark()},isBookmarked:function(index){var arr;return this.getBookmarkedPages().indexOf(String(index))>0},getBookmarkedPages:function(){var str=localStorage.getItem(this.options.name+"_flipbook_bookmarks");return str?str.split(";"):[]},setBookmarkedPages:function(arr){localStorage.setItem(this.options.name+"_flipbook_bookmarks",arr.join(";"))},printPage:function(index,link){var url;if(this.options.pages[index]&&this.options.pages[index].print?url=this.options.pages[index].print:this.options.pages[index]&&this.options.pages[index].canvas&&this.options.pages[index].canvas[this.options.pageTextureSize]?url=this.options.pages[index].canvas[this.options.pageTextureSize].toDataURL():this.options.pages[index]&&this.options.pages[index].src&&(url=this.options.pages[index].src),url){var windowContent="<!DOCTYPE html>";windowContent+="<html>",windowContent+="<head><title>Print canvas</title></head>",windowContent+="<body>",windowContent+='<img src="'+url+'">',windowContent+="</body>",windowContent+="</html>";var printWin=window.open("","Print","height=1600,width=800");printWin.document.open(),printWin.document.write(windowContent),printWin.document.close(),printWin.document.addEventListener("load",function(){printWin.focus(),printWin.print(),printWin.document.close(),printWin.close()},!0)}else{var self=this;this.loadPage(index,this.options.pageTextureSize,function(){self.printPage(index)})}},downloadPage:function(index){if(this.options.pages[index]&&this.options.pages[index].download)url=this.options.pages[index].download;else if(this.options.pages[index]&&this.options.pages[index].src)url=this.options.pages[index].src;else if(this.options.pages[index]&&this.options.pages[index].canvas&&this.options.pages[index].canvas[this.options.pageTextureSize]){var c=document.createElement("canvas"),r=this.options.pageWidth/this.options.pageHeight,ctx;c.width=this.options.pageTextureSize*r,c.height=this.options.pageTextureSize,c.getContext("2d").drawImage(this.options.pages[index].canvas[this.options.pageTextureSize],0,0),url=c.toDataURL("image/jpeg",.5)}if(url){var link=document.createElement("a");link.href=url,link.download="page"+String(index+1),document.body.appendChild(link),link.click(),document.body.removeChild(link)}else{var self=this;this.loadPage(index,this.options.pageTextureSize,function(){self.downloadPage(index)})}},printPdf:function(url){var w;window.open(url,"_blank").onload=function(){this.print()}},togglePrintWindow:function(value){var self,self,html;(self=this).options.printPdfUrl?self.printPdf(self.options.printPdfUrl):self.options.pdfUrl?self.printPdf(self.options.pdfUrl):printme();function printme(){link="about:blank";var pw=window.open(link,"_new");pw.document.open();for(var images="",i=0;i<self.options.pages.length;i++)self.options.pages[i].src&&(images+='<img src="'+self.options.pages[i].src.toString()+'"/>\n');var printHtml=printWindowHtml(images);pw.document.write(printHtml),pw.document.close()}function printWindowHtml(images){return"<html>\n<head>\n<title>Temporary Printing Window</title>\n<script>\nfunction step1() {\n  setTimeout('step2()', 10);\n}\nfunction step2() {\n  window.print();\n  window.close();\n}\n<\/script>\n</head>\n<body onLoad='step1()'>\n"+images+"</body>\n</html>\n"}},thumbsVertical:function(){this.thumbsCreated&&(this.thumbScroll.hScroll=!1,this.thumbScroll.vScroll=!0,this.thumbScroll.refresh())},toggleExpand:function(e){this.browserFullscreen=!0,screenfull.enabled?screenfull.toggle(this.fullscreenElement):(this.isFullscreen=!this.isFullscreen,this.handleFsChange())},expand:function(){},toggleAutoplay:function(value){var self=this;this.autoplay=value||!this.autoplay,this.autoplay?(this.btnAutoplay.$icon.hide(),this.btnAutoplay.$iconAlt.show(),this.autoplayTimer=setInterval(function(){if(self.autoplay){var autoplayStartPage=self.options.autoplayStartPage||1;self.options.rightToLeft?self.Book.prevEnabled?self.prevPage():self.goToPage(self.options.pages.length-autoplayStartPage+1):self.Book.nextEnabled?self.nextPage():self.goToPage(autoplayStartPage)}},self.options.autoplayInterval)):(this.btnAutoplay.$icon.show(),this.btnAutoplay.$iconAlt.hide(),clearInterval(self.autoplayTimer))},triggerResizeOnce:function(){setTimeout(function(){jQuery(window).trigger("resize")},100),setTimeout(function(){jQuery(window).trigger("resize")},500)},triggerResize:function(){setTimeout(function(){jQuery(window).trigger("resize")},100),setTimeout(function(){jQuery(window).trigger("resize")},500),setTimeout(function(){jQuery(window).trigger("resize")},2e3)},initEasing:function(){window.jQuery.extend(window.jQuery.easing,{def:"easeOutQuad",swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d)},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b},easeInOutQuad:function(x,t,b,c,d){return(t/=d/2)<1?c/2*t*t+b:-c/2*(--t*(t-2)-1)+b},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInOutCubic:function(x,t,b,c,d){return(t/=d/2)<1?c/2*t*t*t+b:c/2*((t-=2)*t*t+2)+b},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b},easeInOutQuart:function(x,t,b,c,d){return(t/=d/2)<1?c/2*t*t*t*t+b:-c/2*((t-=2)*t*t*t-2)+b},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b},easeInOutQuint:function(x,t,b,c,d){return(t/=d/2)<1?c/2*t*t*t*t*t+b:c/2*((t-=2)*t*t*t*t+2)+b},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b},easeInExpo:function(x,t,b,c,d){return 0==t?b:c*Math.pow(2,10*(t/d-1))+b},easeOutExpo:function(x,t,b,c,d){return t==d?b+c:c*(1-Math.pow(2,-10*t/d))+b},easeInOutExpo:function(x,t,b,c,d){return 0==t?b:t==d?b+c:(t/=d/2)<1?c/2*Math.pow(2,10*(t-1))+b:c/2*(2-Math.pow(2,-10*--t))+b},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b},easeInOutCirc:function(x,t,b,c,d){return(t/=d/2)<1?-c/2*(Math.sqrt(1-t*t)-1)+b:c/2*(Math.sqrt(1-(t-=2)*t)+1)+b},easeInElastic:function(x,t,b,c,d){var s=1.70158,p=0,a=c;if(0==t)return b;if(1==(t/=d))return b+c;if(p||(p=.3*d),a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return-a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)+b},easeOutElastic:function(x,t,b,c,d){var s=1.70158,p=0,a=c;if(0==t)return b;if(1==(t/=d))return b+c;if(p||(p=.3*d),a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b},easeInOutElastic:function(x,t,b,c,d){var s=1.70158,p=0,a=c;if(0==t)return b;if(2==(t/=d/2))return b+c;if(p||(p=d*(.3*1.5)),a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return t<1?a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*-.5+b:a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b},easeInBack:function(x,t,b,c,d,s){return s==undefined&&(s=1.70158),c*(t/=d)*t*((s+1)*t-s)+b},easeOutBack:function(x,t,b,c,d,s){return s==undefined&&(s=1.70158),c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},easeInOutBack:function(x,t,b,c,d,s){return s==undefined&&(s=1.70158),(t/=d/2)<1?c/2*(t*t*((1+(s*=1.525))*t-s))+b:c/2*((t-=2)*t*((1+(s*=1.525))*t+s)+2)+b},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b},easeOutBounce:function(x,t,b,c,d){return(t/=d)<1/2.75?c*(7.5625*t*t)+b:t<2/2.75?c*(7.5625*(t-=1.5/2.75)*t+.75)+b:t<2.5/2.75?c*(7.5625*(t-=2.25/2.75)*t+.9375)+b:c*(7.5625*(t-=2.625/2.75)*t+.984375)+b},easeInOutBounce:function(x,t,b,c,d){return t<d/2?.5*jQuery.easing.easeInBounce(x,2*t,0,c,d)+b:.5*jQuery.easing.easeOutBounce(x,2*t-d,0,c,d)+.5*c+b}})}},FLIPBOOK.Book=function(){},FLIPBOOK.Book.prototype={rightIndex:0,goToPage:function(){}},FLIPBOOK.Thumbnails=function(main){var self=this,options=main.options,wrapper=main.wrapper;if(this.main=main,this.options=options,this.wrapper=wrapper,this.active=null,options.btnThumbs.enabled){jQuery(main).bind("pagechange",function(){self.thumbsWrapper.css("top",self.bookmark.height()+50+"px")}),this.thumbHolder=jQuery(document.createElement("div")).addClass("flipbook-thumbHolder flipbook-side-menu skin-color-bg").appendTo(wrapper).hide(),this.thumbsWrapper=jQuery(document.createElement("div")).appendTo(this.thumbHolder).addClass("flipbook-thumbsWrapper"),this.thumbsScroller=jQuery(document.createElement("div")).appendTo(this.thumbsWrapper).addClass("flipbook-thumbsScroller"),main.createMenuHeader(this.thumbHolder,main.strings.thumbnails,main.toggleThumbs),this.bookmark=jQuery("<div>").addClass("flipbook-font").appendTo(this.thumbHolder).hide();var current=jQuery('<a><div class="c-p skin-color flipbook-btn">'+options.strings.bookmarkCurrentPage+"</div></a>").appendTo(this.bookmark).bind("touchend click",function(e){main.bookmarkPage(main.cPage[0],this),e.preventDefault(),e.stopPropagation()}),left=jQuery('<a><div class="c-l-p skin-color flipbook-btn">'+options.strings.bookmarkLeftPage+"</div></a>").appendTo(this.bookmark).bind("touchend click",function(e){main.bookmarkPage(main.cPage[0],this),e.preventDefault(),e.stopPropagation()}),right=jQuery('<a><div class="c-r-p skin-color flipbook-btn">'+options.strings.bookmarkRightPage+"</div></a>").appendTo(this.bookmark).bind("touchend click",function(e){main.bookmarkPage(main.cPage[1],this),e.preventDefault(),e.stopPropagation()});this.search=jQuery("<div>").addClass("flipbook-search").appendTo(this.thumbHolder).hide(),this.$searchBar=jQuery('<div class="flipbook-findbar" id="findbar" deluminate_imagetype="png"><div id="findbarInputContainer"><input id="findInput" class="toolbarField" title="Find" placeholder="'+options.strings.findInDocument+'..."></div><div class="flipbook-find-info skin-color"/></div>').appendTo(this.search),this.$findInput=this.$searchBar.find("#findInput").keyup(function(){var str=this.value;if(self.hideAllThumbs(),self.pagesFound=0,self.$findInfo.hide(),main.unmark(),""!=str&&(main.searchingString=str,main.pdfService))for(var i=0;i<main.pdfService.pdfInfo.numPages;i++)self.findInPage(str,i)}),this.$findInfo=this.$searchBar.find(".flipbook-find-info"),this.thumbs=[];var arr2=options.pages,arr=[];if(options.doublePage)for(var i=0;i<arr2.length;i++)0!=i&&i%2==0||arr.push(arr2[i]);else arr=arr2;options.pdfMode&&this.loadThumbsFromPdf(arr);for(var h=options.thumbSize,w=options.thumbSize*options.pageWidth/options.pageHeight,i=0;i<arr.length;i++){var th=arr[i].thumb,$thumb=jQuery("<div>").addClass("flipbook-thumb").appendTo(self.thumbsScroller).attr("data-thumb-index",i).width(w).height(h),btnClose=jQuery("<span>").appendTo($thumb).addClass("thumb-btn-close").bind("touchend click",function(e){e.stopPropagation(),e.preventDefault(),main.removeBookmark(jQuery(this).parent().attr("data-thumb-index"))}),$icon=jQuery("<span>").attr("aria-hidden","true").appendTo(btnClose).addClass("fa fa-times skin-color");if(this.thumbs.push($thumb),arr[i].thumbCanvas)var $thumbImg=jQuery(arr[i].thumbCanvas);else{if(!th)continue;var $thumbImg;($thumbImg=jQuery("<img/>").attr("src",th))[0].onload=function(){self.thumbScroll.refresh()}}if($thumbImg.appendTo($thumb),jQuery("<br/>").appendTo($thumb),options.doublePage&&i>0){$thumb.width(2*w),$thumbImg.height(h).width(2*w).attr("page-title",2*i+1);var $pageNumber=jQuery(document.createElement("soan")).text(String(2*i)+"-"+String(2*i+1)).appendTo($thumb).addClass("skin-color").addClass("flipbook-thumb-num")}else{$thumbImg.height(h).width(w).attr("page-title",i+1);var $pageNumber=jQuery(document.createElement("span")).text(i+1).appendTo($thumb).addClass("skin-color").addClass("flipbook-thumb-num")}$thumbImg.bind("touchend click",function(e){if(e.stopPropagation(),e.preventDefault(),!self.thumbScroll.moved){var clickedPage=Number(jQuery(this).attr("page-title"));options.rightToLeft&&(clickedPage=options.pages.length-clickedPage+1),setTimeout(function(){main.goToPage(clickedPage)},200),"search"!=self.active&&options.thumbsCloseOnClick&&main.toggleThumbs(!1)}})}this.thumbScroll=new FLIPBOOK.IScroll(this.thumbsWrapper[0],{bounce:!1,mouseWheel:!0,scrollbars:!0,interactiveScrollbars:!0}),main.initColors()}},FLIPBOOK.Thumbnails.prototype={loadThumbsFromPdf:function(arr){for(var self=this,pdf,info,numPages=this.main.pdfDocument._pdfInfo.numPages,i=0;i<numPages;i++){var c=document.createElement("canvas");arr[i].thumbCanvas=c}this.loadThumbFromPdf(0,arr)},loadVisibleThumbs:function(){},loadThumbFromPdf:function(i,arr){var self=this;this.main.pdfDocument.getPage(i+1).then(function(page){var v=page.getViewport(1),scale=self.options.thumbSize/v.height,viewport=page.getViewport(scale),c=arr[page.pageIndex].thumbCanvas,context=c.getContext("2d");c.height=viewport.height,c.width=viewport.width;var renderContext={canvasContext:context,viewport:viewport};page.cleanupAfterRender=!0,page.render(renderContext).then(function(){page.cleanup(),page.pageIndex+1<self.main.pdfDocument._pdfInfo.numPages&&self.loadThumbFromPdf(page.pageIndex+1,arr)}),self.thumbScroll.refresh()})},showAllThumbs:function(){jQuery(".flipbook-thumb").show(),this.thumbScroll.refresh()},hideAllThumbs:function(){jQuery(".flipbook-thumb").hide(),this.thumbScroll.refresh()},showThumb:function(index){this.thumbs[index]&&this.thumbs[index].show(),this.thumbScroll.refresh()},hideThumb:function(index){this.thumbs[index].hide(),this.thumbScroll.refresh()},showBookmarks:function(){jQuery(".thumb-btn-close").show(),this.showBookmarkedThumbs(),this.bookmark.show(),this.setTitle(this.options.strings.bookmarks),this.main.updateCurrentPage(),this.active="bookmarks"},showSearch:function(){this.thumbsWrapper.css("top","120px"),this.hideAllThumbs(),this.search.show(),this.$findInfo.hide(),jQuery(".thumb-btn-close").hide(),this.setTitle(this.options.strings.search),this.$findInput.val("").focus(),this.active="search"},showBookmarkedThumbs:function(){var arr=this.main.getBookmarkedPages();this.hideAllThumbs();for(var i=0;i<arr.length;i++){var index=arr[i];index&&this.showThumb(index)}this.thumbsWrapper.css("top",50+this.bookmark.height()+"px")},show:function(){this.setTitle(this.options.strings.thumbnails),this.bookmark.hide(),this.search.hide(),this.thumbHolder.show(),this.main.thumbsVertical(),this.thumbsWrapper.css("top","50px"),this.showAllThumbs(),jQuery(".thumb-btn-close").hide(),this.loadVisibleThumbs(),this.main.resize(),this.active="thumbs"},hide:function(){this.thumbHolder.hide(),this.main.resize(),this.active=null},setTitle:function(str){this.thumbHolder.find(".flipbook-menu-title").text(str)},findInPage:function(str,index){var self=this;this.main.pdfService.findInPage(str,index,function(matches){matches>0&&(self.showThumb(index),self.pagesFound++,self.$findInfo.show().text(self.pagesFound+" "+self.options.strings.pagesFoundContaining+' "'+str+'"'),self.main.mark(str))})}},FLIPBOOK.Lightbox=function(context,content,options){var self=this;this.context=context,this.options=options,this.lightboxOpened=!1,context.$elem.bind("tap click",function(e){content.disposed||(self.openLightbox(),e.stopPropagation())});var img=jQuery(context.elem).find("img");self.overlay=jQuery(document.createElement("div")).attr("style",options.lightboxCSS).addClass("flipbook-overlay").css("display","none").css("top",self.options.lightboxMarginV).css("bottom",self.options.lightboxMarginV).css("left",self.options.lightboxMarginH).css("right",self.options.lightboxMarginH).appendTo("body"),self.options.lightboxCloseOnClick&&jQuery("body").bind("tap click",function(e){var $target=jQuery(e.target);$target.parents().hasClass("flipbook-overlay")&&!$target.hasClass("flipbook-bookLayer")||self.closeLightbox()}),options.lightboxBackground&&self.overlay.css("background",options.lightboxBackground),jQuery(document).keyup(function(e){27==e.keyCode&&self.closeLightbox()}),self.wrapper=jQuery(document.createElement("div")).css("height","auto").appendTo(self.overlay),self.wrapper.attr("class","flipbook-wrapper-transparent").css("margin","0px auto").css("padding","0px").css("height","100%").css("width","100%"),content.appendTo(self.wrapper);var $toolbar=jQuery("<div/>").appendTo(self.wrapper).addClass("flipbook-lightbox-toolbar"),o=options},FLIPBOOK.Lightbox.prototype={openLightbox:function(){this.lightboxOpened||(this.lightboxOpened=!0,this.overlay.css("display","none"),this.overlay.fadeIn("slow",function(){}),jQuery("body").addClass("flipbook-overflow-hidden"),jQuery("html").addClass("flipbook-overflow-hidden"))},closeLightbox:function(){var self=this;1==this.lightboxOpened&&(this.lightboxOpened=!1,this.overlay.fadeOut("fast"),jQuery("body").removeClass("flipbook-overflow-hidden"),jQuery("html").removeClass("flipbook-overflow-hidden"),jQuery(this.context.fullscreenElement).removeClass("flipbook-browser-fullscreen"),this.context.lightboxEnd())},resize:function(){var self=this,jQuerywindow=jQuery(window),ww=jQuerywindow.width(),wh=jQuerywindow.height()}},FLIPBOOK.getFlipbookSrc=function(){for(var scripts=document.getElementsByTagName("script"),i=0;i<scripts.length;i++){var src=String(scripts[i].src);if(src.match("flipbook\\.js")||src.match("flipbook\\.min\\.js"))return src}return""},FLIPBOOK.flipbookSrc=FLIPBOOK.getFlipbookSrc(),FLIPBOOK.iscrollSrc=FLIPBOOK.flipbookSrc.replace("/flipbook.","/iscroll."),FLIPBOOK.threejsSrc=FLIPBOOK.flipbookSrc.replace("/flipbook.","/three."),FLIPBOOK.flipbookWebGlSrc=FLIPBOOK.flipbookSrc.replace("/flipbook.","/flipbook.webgl."),FLIPBOOK.flipbookBook3Src=FLIPBOOK.flipbookSrc.replace("/flipbook.","/flipbook.book3."),FLIPBOOK.flipBookSwipeSrc=FLIPBOOK.flipbookSrc.replace("/flipbook.","/flipbook.swipe."),FLIPBOOK.pdfjsSrc=FLIPBOOK.flipbookSrc.replace("/flipbook.","/pdf."),FLIPBOOK.pdfServiceSrc=FLIPBOOK.flipbookSrc.replace("/flipbook.","/flipbook.pdfservice."),FLIPBOOK.pdfjsworkerSrc=FLIPBOOK.flipbookSrc.replace("/flipbook.","/pdf.worker."),FLIPBOOK.markSrc="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js",FLIPBOOK.scriptsLoaded={},FLIPBOOK.scriptsAdded={}}(jQuery,window,document),function(){"use strict";var u="undefined"!=typeof window&&void 0!==window.document?window.document:{},e="undefined"!=typeof module&&module.exports,t="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,c=function(){for(var e,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,l=n.length,t={};r<l;r++)if((e=n[r])&&e[1]in u){for(r=0;r<e.length;r++)t[n[0][r]]=e[r];return t}return!1}(),l={change:c.fullscreenchange,error:c.fullscreenerror},n={request:function(l){return new Promise(function(e){var n=c.requestFullscreen,r=function(){this.off("change",r),e()}.bind(this);l=l||u.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?l[n]():l[n](t?Element.ALLOW_KEYBOARD_INPUT:{}),this.on("change",r)}.bind(this))},exit:function(){return new Promise(function(e){var n=function(){this.off("change",n),e()}.bind(this);u[c.exitFullscreen](),this.on("change",n)}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,n){var r=l[e];r&&u.addEventListener(r,n,!1)},off:function(e,n){var r=l[e];r&&u.removeEventListener(r,n,!1)},raw:c};c?(Object.defineProperties(n,{isFullscreen:{get:function(){return Boolean(u[c.fullscreenElement])}},element:{enumerable:!0,get:function(){return u[c.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(u[c.fullscreenEnabled])}}}),e?module.exports=n:window.screenfull=n):e?module.exports=!1:window.screenfull=!1}(),function(a){(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera),function(factory){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],factory):factory("undefined"!=typeof module&&module.exports?require("jquery"):jQuery)}(function($){"use strict";function init(options){return!options||void 0!==options.allowPageScroll||void 0===options.swipe&&void 0===options.swipeStatus||(options.allowPageScroll=NONE),void 0!==options.click&&void 0===options.tap&&(options.tap=options.click),options||(options={}),options=$.extend({},$.fn.swipe.defaults,options),this.each(function(){var $this=$(this),plugin=$this.data(PLUGIN_NS);plugin||(plugin=new TouchSwipe(this,options),$this.data(PLUGIN_NS,plugin))})}function TouchSwipe(element,options){function touchStart(jqEvent){if(!(getTouchInProgress()||$(jqEvent.target).closest(options.excludedElements,$element).length>0)){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent;if(!event.pointerType||"mouse"!=event.pointerType||0!=options.fallbackToMouseEvents){var ret,touches=event.touches,evt=touches?touches[0]:event;return phase=PHASE_START,touches?fingerCount=touches.length:!1!==options.preventDefaultEvents&&jqEvent.preventDefault(),distance=0,direction=null,currentDirection=null,pinchDirection=null,duration=0,startTouchesDistance=0,endTouchesDistance=0,pinchZoom=1,pinchDistance=0,maximumsMap=createMaximumsData(),cancelMultiFingerRelease(),createFingerData(0,evt),!touches||fingerCount===options.fingers||options.fingers===ALL_FINGERS||hasPinches()?(startTime=getTimeStamp(),2==fingerCount&&(createFingerData(1,touches[1]),startTouchesDistance=endTouchesDistance=calculateTouchesDistance(fingerData[0].start,fingerData[1].start)),(options.swipeStatus||options.pinchStatus)&&(ret=triggerHandler(event,phase))):ret=!1,!1===ret?(triggerHandler(event,phase=PHASE_CANCEL),ret):(options.hold&&(holdTimeout=setTimeout($.proxy(function(){$element.trigger("hold",[event.target]),options.hold&&(ret=options.hold.call($element,event,event.target))},this),options.longTapThreshold)),setTouchInProgress(!0),null)}}}function touchMove(jqEvent){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent;if(phase!==PHASE_END&&phase!==PHASE_CANCEL&&!inMultiFingerRelease()){var ret,touches=event.touches,evt,currentFinger=updateFingerData(touches?touches[0]:event);if(endTime=getTimeStamp(),touches&&(fingerCount=touches.length),options.hold&&clearTimeout(holdTimeout),phase=PHASE_MOVE,2==fingerCount&&(0==startTouchesDistance?(createFingerData(1,touches[1]),startTouchesDistance=endTouchesDistance=calculateTouchesDistance(fingerData[0].start,fingerData[1].start)):(updateFingerData(touches[1]),endTouchesDistance=calculateTouchesDistance(fingerData[0].end,fingerData[1].end),pinchDirection=calculatePinchDirection(fingerData[0].end,fingerData[1].end)),pinchZoom=calculatePinchZoom(startTouchesDistance,endTouchesDistance),pinchDistance=Math.abs(startTouchesDistance-endTouchesDistance)),fingerCount===options.fingers||options.fingers===ALL_FINGERS||!touches||hasPinches()){if(direction=calculateDirection(currentFinger.start,currentFinger.end),validateDefaultEvent(jqEvent,currentDirection=calculateDirection(currentFinger.last,currentFinger.end)),distance=calculateDistance(currentFinger.start,currentFinger.end),duration=calculateDuration(),setMaxDistance(direction,distance),ret=triggerHandler(event,phase),!options.triggerOnTouchEnd||options.triggerOnTouchLeave){var inBounds=!0;if(options.triggerOnTouchLeave){var bounds=getbounds(this);inBounds=isInBounds(currentFinger.end,bounds)}!options.triggerOnTouchEnd&&inBounds?phase=getNextPhase(PHASE_MOVE):options.triggerOnTouchLeave&&!inBounds&&(phase=getNextPhase(PHASE_END)),phase!=PHASE_CANCEL&&phase!=PHASE_END||triggerHandler(event,phase)}}else triggerHandler(event,phase=PHASE_CANCEL);!1===ret&&triggerHandler(event,phase=PHASE_CANCEL)}}function touchEnd(jqEvent){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent,touches=event.touches;if(touches){if(touches.length&&!inMultiFingerRelease())return startMultiFingerRelease(event),!0;if(touches.length&&inMultiFingerRelease())return!0}return inMultiFingerRelease()&&(fingerCount=fingerCountAtRelease),endTime=getTimeStamp(),duration=calculateDuration(),didSwipeBackToCancel()||!validateSwipeDistance()?triggerHandler(event,phase=PHASE_CANCEL):options.triggerOnTouchEnd||!1===options.triggerOnTouchEnd&&phase===PHASE_MOVE?(!1!==options.preventDefaultEvents&&!1!==jqEvent.cancelable&&jqEvent.preventDefault(),triggerHandler(event,phase=PHASE_END)):!options.triggerOnTouchEnd&&hasTap()?triggerHandlerForGesture(event,phase=PHASE_END,TAP):phase===PHASE_MOVE&&triggerHandler(event,phase=PHASE_CANCEL),setTouchInProgress(!1),null}function touchCancel(){fingerCount=0,endTime=0,startTime=0,startTouchesDistance=0,endTouchesDistance=0,pinchZoom=1,cancelMultiFingerRelease(),setTouchInProgress(!1)}function touchLeave(jqEvent){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent;options.triggerOnTouchLeave&&triggerHandler(event,phase=getNextPhase(PHASE_END))}function removeListeners(){$element.unbind(START_EV,touchStart),$element.unbind(CANCEL_EV,touchCancel),$element.unbind(MOVE_EV,touchMove),$element.unbind(END_EV,touchEnd),LEAVE_EV&&$element.unbind(LEAVE_EV,touchLeave),setTouchInProgress(!1)}function getNextPhase(currentPhase){var nextPhase=currentPhase,validTime=validateSwipeTime(),validDistance=validateSwipeDistance(),didCancel=didSwipeBackToCancel();return!validTime||didCancel?nextPhase=PHASE_CANCEL:!validDistance||currentPhase!=PHASE_MOVE||options.triggerOnTouchEnd&&!options.triggerOnTouchLeave?!validDistance&&currentPhase==PHASE_END&&options.triggerOnTouchLeave&&(nextPhase=PHASE_CANCEL):nextPhase=PHASE_END,nextPhase}function triggerHandler(event,phase){var ret,touches=event.touches;return(didSwipe()||hasSwipes())&&(ret=triggerHandlerForGesture(event,phase,SWIPE)),(didPinch()||hasPinches())&&!1!==ret&&(ret=triggerHandlerForGesture(event,phase,PINCH)),didDoubleTap()&&!1!==ret?ret=triggerHandlerForGesture(event,phase,DOUBLE_TAP):didLongTap()&&!1!==ret?ret=triggerHandlerForGesture(event,phase,LONG_TAP):didTap()&&!1!==ret&&(ret=triggerHandlerForGesture(event,phase,TAP)),phase===PHASE_CANCEL&&touchCancel(event),phase===PHASE_END&&(touches&&touches.length||touchCancel(event)),ret}function triggerHandlerForGesture(event,phase,gesture){var ret;if(gesture==SWIPE){if($element.trigger("swipeStatus",[phase,direction||null,distance||0,duration||0,fingerCount,fingerData,currentDirection]),options.swipeStatus&&!1===(ret=options.swipeStatus.call($element,event,phase,direction||null,distance||0,duration||0,fingerCount,fingerData,currentDirection)))return!1;if(phase==PHASE_END&&validateSwipe()){if(clearTimeout(singleTapTimeout),clearTimeout(holdTimeout),$element.trigger("swipe",[direction,distance,duration,fingerCount,fingerData,currentDirection]),options.swipe&&!1===(ret=options.swipe.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection)))return!1;switch(direction){case LEFT:$element.trigger("swipeLeft",[direction,distance,duration,fingerCount,fingerData,currentDirection]),options.swipeLeft&&(ret=options.swipeLeft.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection));break;case RIGHT:$element.trigger("swipeRight",[direction,distance,duration,fingerCount,fingerData,currentDirection]),options.swipeRight&&(ret=options.swipeRight.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection));break;case UP:$element.trigger("swipeUp",[direction,distance,duration,fingerCount,fingerData,currentDirection]),options.swipeUp&&(ret=options.swipeUp.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection));break;case DOWN:$element.trigger("swipeDown",[direction,distance,duration,fingerCount,fingerData,currentDirection]),options.swipeDown&&(ret=options.swipeDown.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection))}}}if(gesture==PINCH){if($element.trigger("pinchStatus",[phase,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData]),options.pinchStatus&&!1===(ret=options.pinchStatus.call($element,event,phase,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData)))return!1;if(phase==PHASE_END&&validatePinch())switch(pinchDirection){case IN:$element.trigger("pinchIn",[pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData]),options.pinchIn&&(ret=options.pinchIn.call($element,event,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData));break;case OUT:$element.trigger("pinchOut",[pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData]),options.pinchOut&&(ret=options.pinchOut.call($element,event,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData))}}return gesture==TAP?phase!==PHASE_CANCEL&&phase!==PHASE_END||(clearTimeout(singleTapTimeout),clearTimeout(holdTimeout),hasDoubleTap()&&!inDoubleTap()?(doubleTapStartTime=getTimeStamp(),singleTapTimeout=setTimeout($.proxy(function(){doubleTapStartTime=null,$element.trigger("tap",[event.target]),options.tap&&(ret=options.tap.call($element,event,event.target))},this),options.doubleTapThreshold)):(doubleTapStartTime=null,$element.trigger("tap",[event.target]),options.tap&&(ret=options.tap.call($element,event,event.target)))):gesture==DOUBLE_TAP?phase!==PHASE_CANCEL&&phase!==PHASE_END||(clearTimeout(singleTapTimeout),clearTimeout(holdTimeout),doubleTapStartTime=null,$element.trigger("doubletap",[event.target]),options.doubleTap&&(ret=options.doubleTap.call($element,event,event.target))):gesture==LONG_TAP&&(phase!==PHASE_CANCEL&&phase!==PHASE_END||(clearTimeout(singleTapTimeout),doubleTapStartTime=null,$element.trigger("longtap",[event.target]),options.longTap&&(ret=options.longTap.call($element,event,event.target)))),ret}function validateSwipeDistance(){var valid=!0;return null!==options.threshold&&(valid=distance>=options.threshold),valid}function didSwipeBackToCancel(){var cancelled=!1;return null!==options.cancelThreshold&&null!==direction&&(cancelled=getMaxDistance(direction)-distance>=options.cancelThreshold),cancelled}function validatePinchDistance(){return null===options.pinchThreshold||pinchDistance>=options.pinchThreshold}function validateSwipeTime(){var result;return!(options.maxTimeThreshold&&duration>=options.maxTimeThreshold)}function validateDefaultEvent(jqEvent,direction){if(!1!==options.preventDefaultEvents)if(options.allowPageScroll===NONE)jqEvent.preventDefault();else{var auto=options.allowPageScroll===AUTO;switch(direction){case LEFT:(options.swipeLeft&&auto||!auto&&options.allowPageScroll!=HORIZONTAL)&&jqEvent.preventDefault();break;case RIGHT:(options.swipeRight&&auto||!auto&&options.allowPageScroll!=HORIZONTAL)&&jqEvent.preventDefault();break;case UP:(options.swipeUp&&auto||!auto&&options.allowPageScroll!=VERTICAL)&&jqEvent.preventDefault();break;case DOWN:(options.swipeDown&&auto||!auto&&options.allowPageScroll!=VERTICAL)&&jqEvent.preventDefault()}}}function validatePinch(){var hasCorrectFingerCount=validateFingers(),hasEndPoint=validateEndPoint(),hasCorrectDistance=validatePinchDistance();return hasCorrectFingerCount&&hasEndPoint&&hasCorrectDistance}function hasPinches(){return!!(options.pinchStatus||options.pinchIn||options.pinchOut)}function didPinch(){return!(!validatePinch()||!hasPinches())}function validateSwipe(){var hasValidTime=validateSwipeTime(),hasValidDistance=validateSwipeDistance(),hasCorrectFingerCount=validateFingers(),hasEndPoint=validateEndPoint(),didCancel,valid;return!didSwipeBackToCancel()&&hasEndPoint&&hasCorrectFingerCount&&hasValidDistance&&hasValidTime}function hasSwipes(){return!!(options.swipe||options.swipeStatus||options.swipeLeft||options.swipeRight||options.swipeUp||options.swipeDown)}function didSwipe(){return!(!validateSwipe()||!hasSwipes())}function validateFingers(){return fingerCount===options.fingers||options.fingers===ALL_FINGERS||!SUPPORTS_TOUCH}function validateEndPoint(){return 0!==fingerData[0].end.x}function hasTap(){return!!options.tap}function hasDoubleTap(){return!!options.doubleTap}function hasLongTap(){return!!options.longTap}function validateDoubleTap(){if(null==doubleTapStartTime)return!1;var now=getTimeStamp();return hasDoubleTap()&&now-doubleTapStartTime<=options.doubleTapThreshold}function inDoubleTap(){return validateDoubleTap()}function validateTap(){return(1===fingerCount||!SUPPORTS_TOUCH)&&(isNaN(distance)||distance<options.threshold)}function validateLongTap(){return duration>options.longTapThreshold&&distance<DOUBLE_TAP_THRESHOLD}function didTap(){return!(!validateTap()||!hasTap())}function didDoubleTap(){return!(!validateDoubleTap()||!hasDoubleTap())}function didLongTap(){return!(!validateLongTap()||!hasLongTap())}function startMultiFingerRelease(event){previousTouchEndTime=getTimeStamp(),fingerCountAtRelease=event.touches.length+1}function cancelMultiFingerRelease(){previousTouchEndTime=0,fingerCountAtRelease=0}function inMultiFingerRelease(){var withinThreshold=!1,diff;previousTouchEndTime&&(getTimeStamp()-previousTouchEndTime<=options.fingerReleaseThreshold&&(withinThreshold=!0));return withinThreshold}function getTouchInProgress(){return!(!0!==$element.data(PLUGIN_NS+"_intouch"))}function setTouchInProgress(val){$element&&(!0===val?($element.bind(MOVE_EV,touchMove),$element.bind(END_EV,touchEnd),LEAVE_EV&&$element.bind(LEAVE_EV,touchLeave)):($element.unbind(MOVE_EV,touchMove,!1),$element.unbind(END_EV,touchEnd,!1),LEAVE_EV&&$element.unbind(LEAVE_EV,touchLeave,!1)),$element.data(PLUGIN_NS+"_intouch",!0===val))}function createFingerData(id,evt){var f={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return f.start.x=f.last.x=f.end.x=evt.pageX||evt.clientX,f.start.y=f.last.y=f.end.y=evt.pageY||evt.clientY,fingerData[id]=f,f}function updateFingerData(evt){var id=void 0!==evt.identifier?evt.identifier:0,f=getFingerData(id);return null===f&&(f=createFingerData(id,evt)),f.last.x=f.end.x,f.last.y=f.end.y,f.end.x=evt.pageX||evt.clientX,f.end.y=evt.pageY||evt.clientY,f}function getFingerData(id){return fingerData[id]||null}function setMaxDistance(direction,distance){direction!=NONE&&(distance=Math.max(distance,getMaxDistance(direction)),maximumsMap[direction].distance=distance)}function getMaxDistance(direction){if(maximumsMap[direction])return maximumsMap[direction].distance}function createMaximumsData(){var maxData={};return maxData[LEFT]=createMaximumVO(LEFT),maxData[RIGHT]=createMaximumVO(RIGHT),maxData[UP]=createMaximumVO(UP),maxData[DOWN]=createMaximumVO(DOWN),maxData}function createMaximumVO(dir){return{direction:dir,distance:0}}function calculateDuration(){return endTime-startTime}function calculateTouchesDistance(startPoint,endPoint){var diffX=Math.abs(startPoint.x-endPoint.x),diffY=Math.abs(startPoint.y-endPoint.y);return Math.round(Math.sqrt(diffX*diffX+diffY*diffY))}function calculatePinchZoom(startDistance,endDistance){var percent;return(endDistance/startDistance*1).toFixed(2)}function calculatePinchDirection(){return pinchZoom<1?OUT:IN}function calculateDistance(startPoint,endPoint){return Math.round(Math.sqrt(Math.pow(endPoint.x-startPoint.x,2)+Math.pow(endPoint.y-startPoint.y,2)))}function calculateAngle(startPoint,endPoint){var x=startPoint.x-endPoint.x,y=endPoint.y-startPoint.y,r=Math.atan2(y,x),angle=Math.round(180*r/Math.PI);return angle<0&&(angle=360-Math.abs(angle)),angle}function calculateDirection(startPoint,endPoint){if(comparePoints(startPoint,endPoint))return NONE;var angle=calculateAngle(startPoint,endPoint);return angle<=45&&angle>=0?LEFT:angle<=360&&angle>=315?LEFT:angle>=135&&angle<=225?RIGHT:angle>45&&angle<135?DOWN:UP}function getTimeStamp(){var now;return(new Date).getTime()}function getbounds(el){var offset=(el=$(el)).offset(),bounds;return{left:offset.left,right:offset.left+el.outerWidth(),top:offset.top,bottom:offset.top+el.outerHeight()}}function isInBounds(point,bounds){return point.x>bounds.left&&point.x<bounds.right&&point.y>bounds.top&&point.y<bounds.bottom}function comparePoints(pointA,pointB){return pointA.x==pointB.x&&pointA.y==pointB.y}var options=$.extend({},options),useTouchEvents=SUPPORTS_TOUCH||SUPPORTS_POINTER||!options.fallbackToMouseEvents,START_EV=useTouchEvents?SUPPORTS_POINTER?SUPPORTS_POINTER_IE10?"MSPointerDown":"pointerdown":"touchstart":"mousedown",MOVE_EV=useTouchEvents?SUPPORTS_POINTER?SUPPORTS_POINTER_IE10?"MSPointerMove":"pointermove":"touchmove":"mousemove",END_EV=useTouchEvents?SUPPORTS_POINTER?SUPPORTS_POINTER_IE10?"MSPointerUp":"pointerup":"touchend":"mouseup",LEAVE_EV=useTouchEvents?SUPPORTS_POINTER?"mouseleave":null:"mouseleave",CANCEL_EV=SUPPORTS_POINTER?SUPPORTS_POINTER_IE10?"MSPointerCancel":"pointercancel":"touchcancel",distance=0,direction=null,currentDirection=null,duration=0,startTouchesDistance=0,endTouchesDistance=0,pinchZoom=1,pinchDistance=0,pinchDirection=0,maximumsMap=null,$element=$(element),phase="start",fingerCount=0,fingerData={},startTime=0,endTime=0,previousTouchEndTime=0,fingerCountAtRelease=0,doubleTapStartTime=0,singleTapTimeout=null,holdTimeout=null;try{$element.bind(START_EV,touchStart),$element.bind(CANCEL_EV,touchCancel)}catch(e){$.error("events not supported "+START_EV+","+CANCEL_EV+" on jQuery.swipe")}this.enable=function(){return this.disable(),$element.bind(START_EV,touchStart),$element.bind(CANCEL_EV,touchCancel),$element},this.disable=function(){return removeListeners(),$element},this.destroy=function(){removeListeners(),$element.data(PLUGIN_NS,null),$element=null},this.option=function(property,value){if("object"==typeof property)options=$.extend(options,property);else if(void 0!==options[property]){if(void 0===value)return options[property];options[property]=value}else{if(!property)return options;$.error("Option "+property+" does not exist on jQuery.swipe.options")}return null}}var VERSION="1.6.18",LEFT="left",RIGHT="right",UP="up",DOWN="down",IN="in",OUT="out",NONE="none",AUTO="auto",SWIPE="swipe",PINCH="pinch",TAP="tap",DOUBLE_TAP="doubletap",LONG_TAP="longtap",HORIZONTAL="horizontal",VERTICAL="vertical",ALL_FINGERS="all",DOUBLE_TAP_THRESHOLD=10,PHASE_START="start",PHASE_MOVE="move",PHASE_END="end",PHASE_CANCEL="cancel",SUPPORTS_TOUCH="ontouchstart"in window,SUPPORTS_POINTER_IE10=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!SUPPORTS_TOUCH,SUPPORTS_POINTER=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&!SUPPORTS_TOUCH,PLUGIN_NS="TouchSwipe",defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:".noSwipe",preventDefaultEvents:!0};$.fn.swipe=function(method){var $this=$(this),plugin=$this.data(PLUGIN_NS);if(plugin&&"string"==typeof method){if(plugin[method])return plugin[method].apply(plugin,Array.prototype.slice.call(arguments,1));$.error("Method "+method+" does not exist on jQuery.swipe")}else if(plugin&&"object"==typeof method)plugin.option.apply(plugin,arguments);else if(!(plugin||"object"!=typeof method&&method))return init.apply(this,arguments);return $this},$.fn.swipe.version=VERSION,$.fn.swipe.defaults=defaults,$.fn.swipe.phases={PHASE_START:PHASE_START,PHASE_MOVE:PHASE_MOVE,PHASE_END:PHASE_END,PHASE_CANCEL:PHASE_CANCEL},$.fn.swipe.directions={LEFT:LEFT,RIGHT:RIGHT,UP:UP,DOWN:DOWN,IN:IN,OUT:OUT},$.fn.swipe.pageScroll={NONE:NONE,HORIZONTAL:HORIZONTAL,VERTICAL:VERTICAL,AUTO:AUTO},$.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:ALL_FINGERS}}),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;(e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Share=t()}}(function(){var t;"classList"in document.documentElement||!Object.defineProperty||"undefined"==typeof HTMLElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){var t,e,o;return o=function(t){return function(o){var n,i;i=(n=e.className.split(/\s+/)).indexOf(o),t(n,i,o),e.className=n.join(" ")}},e=this,t={add:o(function(t,e,o){~e||t.push(o)}),remove:o(function(t,e){~e&&t.splice(e,1)}),toggle:o(function(t,e,o){~e?t.splice(e,1):t.push(o)}),contains:function(t){return!!~e.className.split(/\s+/).indexOf(t)},item:function(t){return e.className.split(/\s+/)[t]||null}},Object.defineProperty(t,"length",{get:function(){return e.className.split(/\s+/).length}}),t}}),String.prototype.to_rfc3986=function(){var t;return(t=encodeURIComponent(this)).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16)})},t=function(){function t(){}return t.prototype.extend=function(t,e,o){var n,i;for(i in e)(n=void 0!==t[i])&&"object"==typeof e[i]?this.extend(t[i],e[i],o):(o||!n)&&(t[i]=e[i])},t.prototype.hide=function(t){return t.style.display="none"},t.prototype.show=function(t){return t.style.display="block"},t.prototype.has_class=function(t,e){return t.classList.contains(e)},t.prototype.add_class=function(t,e){return t.classList.add(e)},t.prototype.remove_class=function(t,e){return t.classList.remove(e)},t.prototype.is_encoded=function(t){return t=t.to_rfc3986(),decodeURIComponent(t)!==t},t.prototype.encode=function(t){return void 0===t||this.is_encoded(t)?t:t.to_rfc3986()},t.prototype.popup=function(t,e){var o,n,i,r;return null==e&&(e={}),(n={width:500,height:350}).top=screen.height/2-n.height/2,n.left=screen.width/2-n.width/2,(i=function(){var t;for(o in t=[],e)r=e[o],t.push(o+"="+this.encode(r));return t}.call(this).join("&"))&&(i="?"+i),window.open(t+i,"targetWindow","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,left="+n.left+",top="+n.top+",width="+n.width+",height="+n.height)},t}();var e,o=function(t,e){function o(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},n={}.hasOwnProperty;return function(t){function e(t,e){return this.element=t,this.el={head:document.getElementsByTagName("head")[0],body:document.getElementsByTagName("body")[0]},this.config={enabled_networks:0,protocol:-1===["http","https"].indexOf(window.location.href.split(":")[0])?"https://":"//",url:window.location.href,caption:null,title:this.default_title(),image:this.default_image(),description:this.default_description(),ui:{flyout:"top center",button_text:"Share",button_font:!0,icon_font:!0},networks:{google_plus:{enabled:!0,url:null},twitter:{enabled:!0,url:null,description:null},facebook:{enabled:!0,load_sdk:!0,url:null,app_id:null,title:null,caption:null,description:null,image:null},pinterest:{enabled:!0,url:null,image:null,description:null},email:{enabled:!0,title:null,description:null,url:null}}},this.setup(this.element,e),this}return o(e,t),e.prototype.setup=function(t,e){var o,n,i,r,s;for(r=[t],this.extend(this.config,e,!0),this.set_global_configuration(),this.normalize_network_configuration(),this.config.networks.facebook.enabled&&this.config.networks.facebook.load_sdk&&this.inject_facebook_sdk(),n=o=0,s=r.length;s>o;n=++o)i=r[n],this.setup_instance(t,n)},e.prototype.setup_instance=function(t,e){var o,n,i,r,s,l,c,a,p;for(r=t,this.add_class(r,"sharer-"+e),this.inject_html(r),document.getElementById("flipbook-share-facebook").style.display=this.config.networks.facebook.display,document.getElementById("flipbook-share-twitter").style.display=this.config.networks.twitter.display,document.getElementById("flipbook-share-pinterest").style.display=this.config.networks.pinterest.display,document.getElementById("flipbook-share-email").style.display=this.config.networks.email.display,document.getElementById("flipbook-share-google_plus").style.display=this.config.networks.google_plus.display,s=r.getElementsByTagName("label")[0],n=r.getElementsByClassName("social")[0],a=r.getElementsByTagName("li"),this.add_class(n,"networks-"+this.config.enabled_networks),r.addEventListener("click",function(t){return function(){return t.event_toggle(n)}}(this)),o=this,p=[],e=i=0,l=a.length;l>i;e=++i)c=a[e],p.push(c.addEventListener("click",function(){return o.event_network(r,this),o.event_close(n)}));return p},e.prototype.event_toggle=function(t){return this.has_class(t,"active")?this.event_close(t):this.event_open(t)},e.prototype.event_open=function(t){return this.has_class(t,"load")&&this.remove_class(t,"load"),this.add_class(t,"active")},e.prototype.event_close=function(t){return this.remove_class(t,"active")},e.prototype.event_network=function(t,e){var o;return o=e.getAttribute("data-network"),this.hook("before",o,t),this["network_"+o](),this.hook("after",o,t)},e.prototype.open=function(){return this.public("open")},e.prototype.close=function(){return this.public("close")},e.prototype.toggle=function(){return this.public("toggle")},e.prototype.public=function(t){var e,o,n,i,r,s,l;for(l=[],n=o=0,r=(s=document.querySelectorAll(this.element)).length;r>o;n=++o)e=(i=s[n]).getElementsByClassName("social")[0],l.push(this["event_"+t](e));return l},e.prototype.network_facebook=function(){return this.config.networks.facebook.load_sdk?window.FB?FB.ui({method:"feed",name:this.config.networks.facebook.title,link:this.config.networks.facebook.url,picture:this.config.networks.facebook.image,caption:this.config.networks.facebook.caption,description:this.config.networks.facebook.description}):console.error("The Facebook JS SDK hasn't loaded yet."):this.popup("https://www.facebook.com/sharer/sharer.php",{u:this.config.networks.facebook.url})},e.prototype.network_twitter=function(){return this.popup("https://twitter.com/intent/tweet",{text:this.config.networks.twitter.description,url:this.config.networks.twitter.url})},e.prototype.network_google_plus=function(){return this.popup("https://plus.google.com/share",{url:this.config.networks.google_plus.url})},e.prototype.network_pinterest=function(){return this.popup("https://www.pinterest.com/pin/create/button",{url:this.config.networks.pinterest.url,media:this.config.networks.pinterest.image,description:this.config.networks.pinterest.description})},e.prototype.network_email=function(){return this.popup("mailto:",{subject:this.config.networks.email.title,body:this.config.networks.email.description+"%0D%0A"+this.config.networks.email.url||this.config.url})},e.prototype.inject_stylesheet=function(t){var e;return this.el.head.querySelector('link[href="'+t+'"]')?void 0:((e=document.createElement("link")).setAttribute("rel","stylesheet"),e.setAttribute("href",t),this.el.head.appendChild(e))},e.prototype.inject_html=function(t){return t.innerHTML="<div class='social load "+this.config.ui.flyout+"'><ul><li id='flipbook-share-pinterest' class='fab fa-pinterest-p skin-color' data-network='pinterest'></li><li id='flipbook-share-twitter' class='fab fa-twitter skin-color' data-network='twitter'></li><li id='flipbook-share-facebook' class='fab fa-facebook-f skin-color' data-network='facebook'></li><li id='flipbook-share-google_plus' class='fab fa-google-plus-g skin-color' data-network='google_plus'></li><li id='flipbook-share-email' class='fas fa-at skin-color' data-network='email'></li></ul></div>"},e.prototype.inject_facebook_sdk=function(){var t,e;return window.FB||!this.config.networks.facebook.app_id||this.el.body.querySelector("#fb-root")?void 0:((e=document.createElement("script")).text="window.fbAsyncInit=function(){FB.init({appId:'"+this.config.networks.facebook.app_id+"',status:true,xfbml:true})};(function(e,t,n){var r,i=e.getElementsByTagName(t)[0];if(e.getElementById(n)){return}r=e.createElement(t);r.id=n;r.src='"+this.config.protocol+"connect.facebook.net/en_US/all.js';i.parentNode.insertBefore(r,i)})(document,'script','facebook-jssdk')",(t=document.createElement("div")).id="fb-root",this.el.body.appendChild(t),this.el.body.appendChild(e))},e.prototype.hook=function(t,e,o){var n,i;"function"==typeof(n=this.config.networks[e][t])&&(void 0!==(i=n.call(this.config.networks[e],o))&&(i=this.normalize_filter_config_updates(i),this.extend(this.config.networks[e],i,!0),this.normalize_network_configuration()))},e.prototype.default_title=function(){var t;return(t=document.querySelector('meta[property="og:title"]')||document.querySelector('meta[name="twitter:title"]'))?t.getAttribute("content"):(t=document.querySelector("title"))?t.innerText:void 0},e.prototype.default_image=function(){var t;return(t=document.querySelector('meta[property="og:image"]')||document.querySelector('meta[name="twitter:image"]'))?t.getAttribute("content"):void 0},e.prototype.default_description=function(){var t;return(t=document.querySelector('meta[property="og:description"]')||document.querySelector('meta[name="twitter:description"]')||document.querySelector('meta[name="description"]'))?t.getAttribute("content"):""},e.prototype.set_global_configuration=function(){var t,e,o,n,i,r;for(e in r=[],i=this.config.networks){for(o in n=i[e])null==this.config.networks[e][o]&&(this.config.networks[e][o]=this.config[o]);this.config.networks[e].enabled?(t="block",this.config.enabled_networks+=1):t="none",r.push(this.config.networks[e].display=t)}return r},e.prototype.normalize_network_configuration=function(){return this.config.networks.facebook.app_id||(this.config.networks.facebook.load_sdk=!1),this.is_encoded(this.config.networks.twitter.description)||(this.config.networks.twitter.description=encodeURIComponent(this.config.networks.twitter.description)),"number"==typeof this.config.networks.facebook.app_id?this.config.networks.facebook.app_id=this.config.networks.facebook.app_id.toString():void 0},e.prototype.normalize_filter_config_updates=function(t){return this.config.networks.facebook.app_id!==t.app_id&&(console.warn("You are unable to change the Facebook app_id after the button has been initialized. Please update your Facebook filters accordingly."),delete t.app_id),this.config.networks.facebook.load_sdk!==t.load_sdk&&(console.warn("You are unable to change the Facebook load_sdk option after the button has been initialized. Please update your Facebook filters accordingly."),delete t.app_id),t},e}(t)});